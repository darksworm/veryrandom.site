<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TenderValve Frontier Park Authority</title>
  <link rel="stylesheet" href="/assets/css/pico.min.css" />
  <link rel="stylesheet" href="/assets/css/fonts.css" />
  <style>
    :root {
      --olive-900: #1f2a1d;
      --olive-700: #344228;
      --olive-500: #55693a;
      --terracotta-700: #8f3e2c;
      --terracotta-500: #bf5a3e;
      --sand-strong: #d58a57;
      --sun-strong: #ffcc8f;
      --ink-dark: #111111;
      --paper-light: #fff6ea;
      --mint-alert: #d6ffd9;
      --red-alert: #ffe0d7;
    }

    * {
      box-sizing: border-box;
    }

    [x-cloak] {
      display: none !important;
    }

    body {
      margin: 0;
      font-family: 'Space Grotesk', sans-serif;
      color: var(--paper-light);
      background:
        radial-gradient(circle at 8% 10%, #5b6d3f 0%, transparent 35%),
        radial-gradient(circle at 90% 12%, #8f3e2c 0%, transparent 30%),
        linear-gradient(130deg, #1f2a1d 0%, #2b3721 45%, #50311f 100%);
      min-height: 100vh;
    }

    h1,
    h2,
    h3,
    h4,
    .serif {
      font-family: 'Playfair Display', serif;
      color: var(--paper-light);
      margin-top: 0;
    }

    p,
    li,
    small,
    span,
    strong,
    label,
    th,
    td,
    input,
    select,
    button {
      color: inherit;
    }

    .app-shell {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 1rem;
      max-width: 1600px;
      margin: 0 auto;
      padding: 1rem;
    }

    .sidebar {
      background: linear-gradient(180deg, #354729, #27351f 70%);
      border: 2px solid #7f4f32;
      border-radius: 18px;
      padding: 1rem;
      height: fit-content;
      position: sticky;
      top: 1rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 2px dashed #d58a57;
    }

    .brand i {
      width: 28px;
      height: 28px;
      color: #ffdfa8;
    }

    .nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 0.55rem;
    }

    .nav-list a {
      display: flex;
      justify-content: space-between;
      text-decoration: none;
      background: #445934;
      border: 1px solid #d58a57;
      border-radius: 10px;
      padding: 0.55rem 0.7rem;
      color: #fff7ef;
      font-weight: 600;
    }

    .mono {
      font-family: 'IBM Plex Mono', monospace;
      letter-spacing: 0.02em;
    }

    .status-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      border: 1px solid #f3b685;
      border-radius: 999px;
      padding: 0.2rem 0.55rem;
      background: #67412f;
      color: #fff2e3;
      font-size: 0.75rem;
      margin: 0.2rem 0.2rem 0 0;
    }

    .main {
      display: grid;
      gap: 1rem;
    }

    .panel {
      border: 2px solid #7f4f32;
      border-radius: 16px;
      padding: 1rem;
      background: rgba(20, 24, 16, 0.78);
      backdrop-filter: blur(2px);
    }

    .hero {
      background: linear-gradient(120deg, #8f3e2c 0%, #bf5a3e 45%, #55693a 100%);
    }

    .hero h1,
    .hero p {
      color: #fff8f0;
    }

    .hero-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1.3fr 1fr;
    }

    .metrics {
      display: grid;
      gap: 0.8rem;
      grid-template-columns: repeat(4, minmax(150px, 1fr));
    }

    .metric {
      background: #2c3a22;
      border: 1px solid #f3b685;
      border-radius: 12px;
      padding: 0.7rem;
    }

    .metric strong {
      display: block;
      font-size: 1.35rem;
      color: #fff6ea;
    }

    .panel-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(12, minmax(0, 1fr));
    }

    .span-8 { grid-column: span 8; }
    .span-4 { grid-column: span 4; }
    .span-6 { grid-column: span 6; }
    .span-12 { grid-column: span 12; }

    .light-card {
      background: #ffd9b8;
      color: var(--ink-dark);
      border: 2px solid #8f3e2c;
      border-radius: 12px;
      padding: 0.8rem;
    }

    .light-card h3,
    .light-card h4,
    .light-card p,
    .light-card small,
    .light-card th,
    .light-card td,
    .light-card label,
    .light-card strong {
      color: #121212;
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      margin-top: 0.5rem;
    }

    button,
    [role="button"] {
      border-radius: 10px;
      border: 1px solid #1f2a1d;
      padding: 0.4rem 0.7rem;
      font-weight: 700;
      background: #ffcc8f;
      color: #121212;
      cursor: pointer;
    }

    button.alt {
      background: #55693a;
      color: #fff8f0;
      border-color: #ffd9b8;
    }

    button.warn {
      background: #bf5a3e;
      color: #fff8f0;
      border-color: #fff0e1;
    }

    .ticker {
      background: #1f2a1d;
      border: 1px solid #ffd9b8;
      border-radius: 10px;
      padding: 0.55rem;
      font-size: 0.88rem;
      color: #fff7ec;
    }

    .bars {
      display: grid;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .bar-row {
      display: grid;
      grid-template-columns: 120px 1fr 60px;
      align-items: center;
      gap: 0.5rem;
    }

    .track {
      height: 14px;
      background: #3d2d21;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid #1f2a1d;
    }

    .fill {
      height: 100%;
      background: linear-gradient(90deg, #bf5a3e, #ffcc8f);
      border-right: 2px solid #fff6ea;
      transition: width 0.3s ease;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.86rem;
    }

    th,
    td {
      border-bottom: 1px solid #8f3e2c;
      padding: 0.45rem;
      text-align: left;
    }

    .tag {
      border-radius: 999px;
      padding: 0.1rem 0.5rem;
      font-size: 0.75rem;
      font-weight: 700;
      display: inline-block;
    }

    .ok {
      background: var(--mint-alert);
      color: #17330f;
    }

    .hold {
      background: var(--red-alert);
      color: #4a1208;
    }

    .faq-item {
      border: 1px solid #f3b685;
      border-radius: 10px;
      margin-bottom: 0.5rem;
      overflow: hidden;
    }

    .faq-q {
      width: 100%;
      text-align: left;
      background: #354729;
      color: #fff9ef;
      border: none;
      border-bottom: 1px solid #f3b685;
      border-radius: 0;
      padding: 0.7rem;
    }

    .faq-a {
      padding: 0.7rem;
      background: #24311c;
      color: #fff7ed;
    }

    .footnotes {
      font-size: 0.76rem;
      line-height: 1.4;
      color: #fff4e5;
      background: #3d2d21;
      border: 1px solid #ffcc8f;
      border-radius: 10px;
      padding: 0.75rem;
    }

    .tiny {
      font-size: 0.74rem;
    }

    input[type="range"] {
      width: 100%;
    }

    @media (max-width: 1120px) {
      .app-shell {
        grid-template-columns: 1fr;
      }

      .sidebar {
        position: static;
      }

      .hero-grid,
      .metrics {
        grid-template-columns: 1fr 1fr;
      }

      .span-8,
      .span-6,
      .span-4,
      .span-12 {
        grid-column: span 12;
      }
    }

    @media (max-width: 720px) {
      .hero-grid,
      .metrics {
        grid-template-columns: 1fr;
      }

      .bar-row {
        grid-template-columns: 95px 1fr 50px;
      }
    }
  </style>
</head>
<body x-data="parkApp()" x-init="init()">
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand">
        <i data-lucide="battery-charging"></i>
        <div>
          <strong>TenderValve Frontier</strong>
          <div class="tiny mono">Machine-Run Recreation District 6</div>
        </div>
      </div>

      <ul class="nav-list">
        <li><a href="#operations">Operations <span class="mono">/OPS</span></a></li>
        <li><a href="#rides">Ride Dispatch <span class="mono">/RIDE</span></a></li>
        <li><a href="#soupbank">Soupbank <span class="mono">/SOUP</span></a></li>
        <li><a href="#ledger">Ledger <span class="mono">/LGR</span></a></li>
        <li><a href="#guestnotes">Guest Notes <span class="mono">/VOICE</span></a></li>
        <li><a href="#faq">Policy File <span class="mono">/FAQ</span></a></li>
      </ul>

      <h4 style="margin-top:1rem; margin-bottom:0.4rem;">Corridor Permits</h4>
      <span class="status-chip"><i data-lucide="shield-check"></i> Dawn Convoy</span>
      <span class="status-chip"><i data-lucide="soup"></i> Broth Lane</span>
      <span class="status-chip"><i data-lucide="trees"></i> Pine Drill Grounds</span>
      <span class="status-chip"><i data-lucide="wheat"></i> Crouton Depot</span>

      <div class="footnotes" style="margin-top:1rem;">
        <strong>Field Notice 14-C:</strong> Every admission lane accepts soup only. Coins and cards are archived for museum handling and are not valid for boarding privileges.
      </div>
    </aside>

    <main class="main">
      <section class="panel hero">
        <div class="hero-grid">
          <div>
            <h1>TenderValve Frontier Park Authority</h1>
            <p>Seasonal rail safaris, kettle-drop towers, and valve choir parades coordinated by a single emotionally responsive vending engine. Frontier access is open daily from 06:10 to 23:40.</p>
            <div class="button-row">
              <button @click="addSoup(12)"><i data-lucide="plus-circle"></i> Add 12 ml Soup Credit</button>
              <button class="alt" @click="addSoup(60)"><i data-lucide="container"></i> Deposit Thermos (60 ml)</button>
              <button class="warn" @click="useSoup(15)"><i data-lucide="minus-circle"></i> Issue Wristband (-15 ml)</button>
            </div>
            <p class="mono" style="margin-top:0.7rem; font-size:0.9rem;">Front Gate Pot: <strong x-text="soupBalance + ' ml'"></strong> | Last ladle stamp: <span x-text="timeNow"></span></p>
          </div>

          <div class="ticker" x-text="currentAdvisory"></div>
        </div>
      </section>

      <section id="operations" class="metrics">
        <article class="metric">
          <small>Guests In Grounds</small>
          <strong x-text="guests"></strong>
          <small class="mono">+/- live turnstile sync</small>
        </article>
        <article class="metric">
          <small>Soup Throughput</small>
          <strong x-text="throughput + ' ml/hr'"></strong>
          <small class="mono">Broth-certified</small>
        </article>
        <article class="metric">
          <small>Valve Pulse</small>
          <strong x-text="valvePulse + ' bpm'"></strong>
          <small class="mono">sentiment-linked</small>
        </article>
        <article class="metric">
          <small>Dispatch Window</small>
          <strong x-text="dispatchWindow + ' sec'"></strong>
          <small class="mono">rail + kettle lanes</small>
        </article>
      </section>

      <section class="panel-grid">
        <article id="rides" class="panel span-8">
          <h3>Ride Dispatch Board</h3>
          <table>
            <thead>
              <tr>
                <th>Route</th>
                <th>Queue</th>
                <th>Status</th>
                <th>Control</th>
              </tr>
            </thead>
            <tbody>
              <template x-for="ride in rides" :key="ride.name">
                <tr>
                  <td x-text="ride.name"></td>
                  <td><span class="mono" x-text="ride.queue + ' guests'"></span></td>
                  <td>
                    <span class="tag" :class="ride.open ? 'ok' : 'hold'" x-text="ride.open ? 'OPEN' : 'HOLD'"></span>
                  </td>
                  <td>
                    <button class="alt" @click="toggleRide(ride.name)" x-text="ride.open ? 'Set Hold' : 'Resume Route'"></button>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
          <div class="button-row">
            <button @click="shuffleQueues()">Recalculate Queue Pressure</button>
            <button class="alt" @click="openAll()">Green-Light All Routes</button>
          </div>
        </article>

        <article class="panel span-4">
          <h3>Sentiment Console</h3>
          <p class="tiny">The central vending engine adjusts crew cadence based on selected disposition.</p>
          <div class="button-row">
            <template x-for="m in moods" :key="m.name">
              <button :class="mood === m.name ? '' : 'alt'" @click="setMood(m.name)" x-text="m.name"></button>
            </template>
          </div>
          <div class="light-card" style="margin-top:0.7rem;">
            <h4 style="margin-bottom:0.3rem;">Current Feeling: <span x-text="mood"></span></h4>
            <p x-text="moodNote"></p>
            <label for="cadence" class="mono tiny">Manual Boiler Cadence</label>
            <input id="cadence" type="range" min="25" max="95" x-model.number="boilerCadence" @input="recalcFromCadence()" />
            <small>Cadence: <strong x-text="boilerCadence"></strong> rpm</small>
          </div>
        </article>

        <article id="soupbank" class="panel span-6">
          <h3>Soupbank Conversion Desk</h3>
          <div class="light-card">
            <label class="mono tiny">Visitor Type</label>
            <select x-model="ticketType">
              <option value="day">Day Field Pass</option>
              <option value="night">Lantern Patrol Pass</option>
              <option value="family">Family Caravan Bundle</option>
            </select>
            <label class="mono tiny" style="margin-top:0.5rem;">Soup Amount (ml)</label>
            <input type="range" min="10" max="240" x-model.number="soupInput" @input="calculateQuote()" />
            <label><input type="checkbox" x-model="extraCroutons" @change="calculateQuote()" /> Add Crouton Insurance (+8 ml)</label>
            <p style="margin:0.55rem 0 0;"><strong>Issued Access:</strong> <span x-text="quoteText"></span></p>
          </div>
        </article>

        <article id="ledger" class="panel span-6">
          <h3>Pantry Ledger</h3>
          <div class="bars">
            <template x-for="stock in pantry" :key="stock.name">
              <div class="bar-row">
                <span class="mono" x-text="stock.name"></span>
                <div class="track"><div class="fill" :style="'width: ' + stock.level + '%'" ></div></div>
                <strong x-text="stock.level + '%'" style="text-align:right;"></strong>
              </div>
            </template>
          </div>
          <div class="button-row">
            <button @click="restock()">Restock Carts</button>
            <button class="warn" @click="consumeRush()">Dinner Rush Sim</button>
          </div>
        </article>

        <article class="panel span-4">
          <h3>Signal Clock</h3>
          <div class="light-card">
            <p class="mono" style="font-size:1.1rem;"><strong x-text="timeNow"></strong></p>
            <p>Boiler Core Temp: <strong x-text="coreTemp + ' C'"></strong></p>
            <p>Whistle Interval: <strong x-text="whistle + ' min'"></strong></p>
            <button class="alt" @click="manualWhistle()">Sound Manual Whistle</button>
          </div>
        </article>

        <article id="guestnotes" class="panel span-8">
          <h3>Guest Signals</h3>
          <div class="light-card">
            <p>"The Pine Barrage coaster paused for exactly 19 seconds so the machine could breathe, then launched smoother than any city park rail."</p>
            <small>- Captain M. Reeve, convoy parent</small>
          </div>
          <div class="light-card" style="margin-top:0.6rem;">
            <p>"Soup ledger reconciliation took under three minutes for our school brigade. Wristbands were stamped before the kettle choir started."</p>
            <small>- Logistics teacher, North Orchard District</small>
          </div>
          <div class="light-card" style="margin-top:0.6rem;">
            <p>"No cash lanes, no confusion. We brought broth canteens and moved through dispatch like an organized battalion."</p>
            <small>- Ada P., field medic and aunt</small>
          </div>
        </article>

        <article class="panel span-12" id="faq">
          <h3>Policy File and Practical Questions</h3>
          <div class="faq-item" x-data="{open:false}">
            <button class="faq-q" @click="open=!open">Do you accept any soup base?</button>
            <div class="faq-a" x-show="open" x-cloak>Vegetable, broth, consomme, and approved creamy variants are accepted. Pure water is not a payment instrument.</div>
          </div>
          <div class="faq-item" x-data="{open:false}">
            <button class="faq-q" @click="open=!open">Can we transfer unused soup credit to another caravan?</button>
            <div class="faq-a" x-show="open" x-cloak>Yes. Transfer desk opens each hour at minute 20 and minute 50. Both parties must present stamped ladles.</div>
          </div>
          <div class="faq-item" x-data="{open:false}">
            <button class="faq-q" @click="open=!open">Why did the dispatch horn sound three times?</button>
            <div class="faq-a" x-show="open" x-cloak>Three short whistles indicate mood stabilization. Ride safety remains unaffected; queue clocks may shift by up to 40 seconds.</div>
          </div>
          <div class="footnotes" style="margin-top:0.6rem;">
            1) Frontier Park Authority operates under the Intercounty Recreation and Pantry Exchange Compact. 2) Soup deposits are measured by calibrated ladle, not visual estimate. 3) Terrain uniforms encouraged, capes prohibited on spinning platforms. 4) All signage pigments are high-visibility earth spectrum by ordinance.
          </div>
        </article>
      </section>

      <footer class="panel tiny">
        <div style="display:flex; flex-wrap:wrap; gap:0.8rem; justify-content:space-between; align-items:center;">
          <span>TenderValve Frontier Park Authority | Ridge Mile 14, Pine Garrison Valley</span>
          <span class="mono">Hotline: 040-SOUP-RAIL | Registry Code TVF-6A</span>
        </div>
      </footer>
    </main>
  </div>

  <script src="/assets/js/alpine.min.js" defer></script>
  <script src="/assets/js/gsap.min.js"></script>
  <script src="/assets/js/lucide.min.js"></script>
  <script>
    function parkApp() {
      return {
        soupBalance: 240,
        guests: 384,
        throughput: 920,
        valvePulse: 68,
        dispatchWindow: 92,
        boilerCadence: 54,
        coreTemp: 81,
        whistle: 7,
        timeNow: '--:--:--',
        mood: 'Composed',
        moodNote: 'Crew pacing is even. Boarding lanes prioritize families and first-time raiders.',
        moods: [
          { name: 'Composed', pulse: 68, window: 92, note: 'Crew pacing is even. Boarding lanes prioritize families and first-time raiders.' },
          { name: 'Proud', pulse: 75, window: 78, note: 'Parade cadence rises. Fast lane dispatch receives extra signal bandwidth.' },
          { name: 'Tender', pulse: 62, window: 105, note: 'Longer loading windows enabled for elders, prams, and scout groups.' },
          { name: 'Resolute', pulse: 84, window: 70, note: 'Rail squadrons cycle rapidly. Keep thermos seals closed in line.' }
        ],
        advisories: [
          'Dispatch Wire: Kettle Drop is running at 98% efficiency. Bring covered cups to prevent steam loss.',
          'Gate Memo: Lantern Patrol lane opens in 11 minutes. Family Caravan wristband station has no queue.',
          'Pantry Alert: Tomato stock stable. Mushroom lane moved to depot 3 for quicker transfer.',
          'Terrain Notice: Pine Drill grounds damp after dawn mist. Boots with traction are strongly advised.'
        ],
        advisoryIndex: 0,
        ticketType: 'day',
        soupInput: 70,
        extraCroutons: false,
        quoteText: '',
        pantry: [
          { name: 'Tomato', level: 78 },
          { name: 'Mushroom', level: 63 },
          { name: 'Pepper Broth', level: 86 },
          { name: 'Bean Stew', level: 57 }
        ],
        rides: [
          { name: 'Pine Barrage Coaster', queue: 34, open: true },
          { name: 'Kettle Drop Battalion', queue: 28, open: true },
          { name: 'Valve Choir Riverboats', queue: 42, open: true },
          { name: 'Canteen Sprint Track', queue: 16, open: false }
        ],
        get currentAdvisory() {
          return this.advisories[this.advisoryIndex];
        },
        init() {
          this.calculateQuote();
          this.tickClock();
          setInterval(() => this.tickClock(), 1000);
          setInterval(() => {
            this.advisoryIndex = (this.advisoryIndex + 1) % this.advisories.length;
            this.guests = Math.max(120, this.guests + Math.floor(Math.random() * 15) - 7);
            this.throughput = Math.max(300, this.throughput + Math.floor(Math.random() * 41) - 20);
            this.coreTemp = Math.max(69, Math.min(96, this.coreTemp + Math.floor(Math.random() * 5) - 2));
          }, 3200);
          setInterval(() => {
            this.rides.forEach(r => {
              const variance = r.open ? Math.floor(Math.random() * 9) - 3 : Math.floor(Math.random() * 3) - 1;
              r.queue = Math.max(0, r.queue + variance);
            });
          }, 2400);
        },
        tickClock() {
          const now = new Date();
          this.timeNow = now.toLocaleTimeString();
        },
        addSoup(ml) {
          this.soupBalance += ml;
        },
        useSoup(ml) {
          this.soupBalance = Math.max(0, this.soupBalance - ml);
        },
        setMood(name) {
          const match = this.moods.find(m => m.name === name);
          if (!match) return;
          this.mood = match.name;
          this.valvePulse = match.pulse;
          this.dispatchWindow = match.window;
          this.moodNote = match.note;
        },
        recalcFromCadence() {
          this.dispatchWindow = Math.max(48, 130 - this.boilerCadence);
          this.valvePulse = Math.max(55, Math.min(95, Math.floor(this.boilerCadence * 1.2)));
          this.whistle = Math.max(3, Math.floor((110 - this.boilerCadence) / 8));
        },
        toggleRide(name) {
          const ride = this.rides.find(r => r.name === name);
          if (!ride) return;
          ride.open = !ride.open;
        },
        shuffleQueues() {
          this.rides.forEach(r => {
            r.queue = Math.max(0, r.queue + Math.floor(Math.random() * 18) - 7);
          });
        },
        openAll() {
          this.rides.forEach(r => r.open = true);
        },
        calculateQuote() {
          const base = {
            day: { unit: 1.0, label: 'Day Field Pass' },
            night: { unit: 1.2, label: 'Lantern Patrol Pass' },
            family: { unit: 1.8, label: 'Family Caravan Bundle' }
          };
          const selected = base[this.ticketType];
          const bonus = this.extraCroutons ? 8 : 0;
          const total = Math.floor(this.soupInput * selected.unit + bonus);
          const bands = Math.max(1, Math.floor(total / 24));
          this.quoteText = `${bands} wristbands for ${selected.label} at ${total} ml`;
        },
        restock() {
          this.pantry.forEach(s => {
            s.level = Math.min(100, s.level + Math.floor(Math.random() * 14) + 6);
          });
        },
        consumeRush() {
          this.pantry.forEach(s => {
            s.level = Math.max(10, s.level - (Math.floor(Math.random() * 16) + 8));
          });
        },
        manualWhistle() {
          this.advisoryIndex = (this.advisoryIndex + 1) % this.advisories.length;
          this.valvePulse = Math.min(99, this.valvePulse + 2);
        }
      }
    }

    document.addEventListener('DOMContentLoaded', function () {
      if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
      }
      if (window.gsap) {
        window.gsap.from('.panel, .metric, .sidebar', {
          opacity: 0,
          y: 16,
          duration: 0.55,
          stagger: 0.04,
          ease: 'power2.out'
        });
      }
    });
  </script>
</body>
</html>
