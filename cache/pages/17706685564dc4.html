<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Northfield Somnolence Institute</title>
  <link rel="stylesheet" href="/assets/css/pico.min.css" />
  <link rel="stylesheet" href="/assets/css/fonts.css" />
  <style>
    :root {
      --bg: #f6e5d2;
      --paper: #fff5e8;
      --panel: #edd5b8;
      --ink: #1f1a17;
      --olive: #4b5b2b;
      --terracotta: #a14d2f;
      --deep: #2a211d;
      --cream: #fff8f0;
      --line: #5e4a3c;
      --ok: #224d1b;
      --warn: #7a3500;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at 8% 10%, #fbe9d7 0%, var(--bg) 45%, #efddc8 100%);
      color: var(--ink);
      font-family: 'Space Grotesk', sans-serif;
      line-height: 1.45;
    }

    main {
      width: min(1100px, 92vw);
      margin: 0 auto;
      padding: 1.5rem 0 4rem;
      display: grid;
      gap: 1rem;
    }

    .topnote {
      background: var(--deep);
      color: var(--cream);
      border: 2px solid #16100d;
      padding: 0.6rem 1rem;
      font-size: 0.9rem;
      letter-spacing: 0.01em;
    }

    nav {
      background: var(--paper);
      border: 2px solid var(--line);
      padding: 0.9rem 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem 1.1rem;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.3rem, 2.2vw, 1.9rem);
      font-weight: 700;
      color: var(--ink);
      margin: 0;
    }

    .nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--ink);
      border: 1px solid var(--line);
      background: #f9ead8;
      padding: 0.35rem 0.65rem;
      font-size: 0.86rem;
      font-weight: 700;
    }

    .hero {
      background: linear-gradient(160deg, #f9e9d4 0%, #ecd5bb 58%, #e4c6a8 100%);
      border: 2px solid var(--line);
      padding: 1rem;
      display: grid;
      gap: 1rem;
    }

    .hero h1 {
      font-family: 'Playfair Display', serif;
      margin: 0;
      font-size: clamp(2rem, 8vw, 5.2rem);
      line-height: 0.95;
      color: var(--ink);
    }

    .hero-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 0.7rem;
    }

    .tile {
      border: 2px solid var(--line);
      padding: 0.7rem;
      background: var(--paper);
    }

    .tile.dark {
      background: var(--deep);
      color: var(--cream);
      border-color: #150f0b;
    }

    .tile.olive {
      background: #d7e0c7;
    }

    .kpi {
      margin: 0;
      font-size: clamp(1.3rem, 3.5vw, 2.3rem);
      font-weight: 800;
    }

    .muted {
      color: var(--ink);
      font-size: 0.85rem;
      margin: 0;
      font-weight: 600;
    }

    .mono {
      font-family: 'IBM Plex Mono', monospace;
    }

    .section-head {
      margin: 0;
      font-size: clamp(1.4rem, 4vw, 2.6rem);
      font-family: 'Playfair Display', serif;
      line-height: 1;
    }

    .dashboard {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 0.7rem;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
    }

    .controls button,
    .controls input[type="range"] {
      margin: 0;
    }

    button {
      background: var(--terracotta);
      color: #fffaf4;
      border: 1px solid #602e1b;
      font-weight: 700;
      padding: 0.38rem 0.62rem;
      cursor: pointer;
    }

    button.alt {
      background: var(--olive);
      border-color: #243114;
      color: #fffaf4;
    }

    button.light {
      background: #f7e6d0;
      color: var(--ink);
      border-color: var(--line);
    }

    .status-pill {
      display: inline-block;
      border: 1px solid #2e2e2e;
      padding: 0.15rem 0.5rem;
      font-size: 0.78rem;
      font-weight: 800;
      letter-spacing: 0.02em;
    }

    .status-ok {
      background: #d7f0cd;
      color: #10210d;
    }

    .status-warn {
      background: #ffd7b9;
      color: #351400;
    }

    .meter {
      height: 1.1rem;
      background: #f8e8d5;
      border: 1px solid var(--line);
      position: relative;
      overflow: hidden;
    }

    .meter > span {
      position: absolute;
      inset: 0 auto 0 0;
      background: linear-gradient(90deg, var(--olive) 0%, #7c8c46 100%);
      width: 20%;
      transition: width 250ms ease;
    }

    .bars {
      display: grid;
      gap: 0.4rem;
    }

    .bar {
      display: grid;
      grid-template-columns: 7rem 1fr 2.4rem;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.82rem;
      font-weight: 700;
    }

    .bar-track {
      height: 0.9rem;
      border: 1px solid var(--line);
      background: #f8e8d5;
      position: relative;
    }

    .bar-fill {
      position: absolute;
      inset: 0 auto 0 0;
      background: linear-gradient(90deg, #bf6a47 0%, #97422a 100%);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.84rem;
      background: #fff3e4;
      color: var(--ink);
    }

    th,
    td {
      border: 1px solid var(--line);
      padding: 0.35rem 0.45rem;
      text-align: left;
      vertical-align: top;
    }

    th {
      background: #ecd0b0;
      font-weight: 800;
    }

    .ticker {
      border: 2px solid #140e0a;
      background: #241b17;
      color: #fff6ec;
      padding: 0.75rem;
      font-family: 'IBM Plex Mono', monospace;
      display: grid;
      gap: 0.5rem;
    }

    .stack {
      display: grid;
      gap: 0.7rem;
    }

    .quote {
      font-size: 0.93rem;
      font-weight: 600;
      margin: 0;
    }

    .fine {
      font-size: 0.74rem;
      font-weight: 700;
      margin: 0;
    }

    footer {
      border: 2px solid var(--line);
      background: #f8e8d5;
      padding: 1rem;
      display: grid;
      gap: 0.45rem;
    }

    .col-12 { grid-column: span 12; }
    .col-8 { grid-column: span 8; }
    .col-7 { grid-column: span 7; }
    .col-6 { grid-column: span 6; }
    .col-5 { grid-column: span 5; }
    .col-4 { grid-column: span 4; }
    .col-3 { grid-column: span 3; }

    @media (max-width: 840px) {
      .col-8, .col-7, .col-6, .col-5, .col-4, .col-3 {
        grid-column: span 12;
      }

      nav {
        justify-content: center;
      }

      .bar {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <main x-data="instituteApp()" x-init="init()">
    <div class="topnote mono">
      Federal Sleep Materials Registry ID: NSI-4471-A | Facility Entry Status: Active | Hallway B linen scanners recalibrated 05:16
    </div>

    <nav>
      <p class="brand">Northfield Somnolence Institute</p>
      <div class="nav-links mono">
        <a href="#overview">Overview</a>
        <a href="#telemetry">Telemetry</a>
        <a href="#field">Field Cases</a>
        <a href="#access">Access Plans</a>
        <a href="#ethics">Ethics Board</a>
        <a href="#faq">FAQ</a>
      </div>
    </nav>

    <section id="overview" class="hero">
      <h1>We map pillow cognition before it maps you.</h1>
      <div class="hero-grid">
        <article class="tile col-4">
          <p class="muted mono">Live Corridor Uptime</p>
          <p class="kpi" x-text="uptime + '%'">99.2%</p>
          <p class="fine">All quiet-surface monitors nominal except Shelf 9B recursion seam.</p>
        </article>

        <article class="tile dark col-4">
          <p class="muted" style="color:#fff6ec;">Active Containment Chambers</p>
          <p class="kpi mono" x-text="chambers"></p>
          <p class="fine" style="color:#fff6ec;">Includes stitched-memory arrays and hydrofoam interview bays.</p>
        </article>

        <article class="tile olive col-4">
          <p class="muted mono">Minutes Since Last Whisper Event</p>
          <p class="kpi" x-text="minutesSince"></p>
          <p class="fine">Target threshold is &gt; 14. Regulatory target met.</p>
        </article>

        <article class="tile col-8">
          <h2 class="section-head">Signal Intake Console</h2>
          <p class="quote">Current directive: <span class="mono" x-text="directive"></span></p>
          <div class="controls" role="group" aria-label="Directive controls">
            <button @click="setDirective('Observe seam patterns')">Observe</button>
            <button @click="setDirective('Interview memory folds')">Interview</button>
            <button @click="setDirective('Escalate olfactory probes')">Escalate</button>
            <button class="alt" @click="panicSweep()">Panic Sweep</button>
          </div>
          <p class="fine">Footnote A1: Panic Sweep cannot be reversed during active nap cycles.</p>
        </article>

        <article class="tile dark col-4">
          <p class="muted" style="color:#fff6ec;">Operator Presence Gate</p>
          <p>
            <span class="status-pill" :class="quietProtocol ? 'status-ok' : 'status-warn'" x-text="quietProtocol ? 'QUIET PROTOCOL ON' : 'QUIET PROTOCOL OFF'"></span>
          </p>
          <div class="controls">
            <button class="light" @click="quietProtocol = !quietProtocol">Toggle</button>
          </div>
          <p class="fine" style="color:#fff6ec;">Footnote B2: Turning this off may increase anecdotal blanket confidence.</p>
        </article>
      </div>
    </section>

    <section id="telemetry" class="dashboard">
      <article class="tile col-6">
        <h2 class="section-head">Behavioral Drift Meter</h2>
        <p class="muted">Drift confidence sampled every 2 seconds.</p>
        <div class="meter" aria-hidden="true"><span :style="`width:${drift}%`"></span></div>
        <p class="kpi mono" x-text="drift + '%'">44%</p>
        <div class="controls">
          <button class="light" @click="drift = Math.max(4, drift - 6)">Stabilize</button>
          <button class="alt" @click="drift = Math.min(98, drift + 6)">Stress Test</button>
          <button @click="drift = 52">Normalize</button>
        </div>
      </article>

      <article class="tile col-6 dark">
        <h2 class="section-head" style="color:#fff8f0;">Ticker Feed</h2>
        <div class="ticker">
          <div><strong>Signal:</strong> <span x-text="ticker[currentTicker].signal"></span></div>
          <div><strong>Origin:</strong> <span x-text="ticker[currentTicker].origin"></span></div>
          <div><strong>Urgency:</strong> <span x-text="ticker[currentTicker].urgency"></span></div>
        </div>
        <div class="controls">
          <button class="light" @click="prevTicker()">Prev</button>
          <button class="light" @click="nextTicker()">Next</button>
          <button class="alt" @click="autoTicker = !autoTicker" x-text="autoTicker ? 'Pause Auto' : 'Resume Auto'"></button>
        </div>
      </article>

      <article class="tile col-8">
        <h2 class="section-head">Linen Intelligence Bands</h2>
        <div class="bars">
          <template x-for="band in bands" :key="band.name">
            <div class="bar">
              <span x-text="band.name"></span>
              <div class="bar-track"><div class="bar-fill" :style="`width:${band.value}%`"></div></div>
              <span class="mono" x-text="band.value + '%'">0%</span>
            </div>
          </template>
        </div>
        <div class="controls">
          <button @click="shuffleBands()">Resample</button>
        </div>
      </article>

      <article class="tile col-4 olive">
        <h2 class="section-head">Field Timer</h2>
        <p class="kpi mono" x-text="formattedTimer"></p>
        <p class="muted">Session auto-archives at <strong x-text="archiveIn"></strong> minutes.</p>
        <div class="controls">
          <button class="light" @click="addMinutes(5)">+5 min</button>
          <button class="light" @click="addMinutes(-5)">-5 min</button>
        </div>
      </article>

      <article class="tile col-12" id="field">
        <h2 class="section-head">Incident Ledger</h2>
        <p class="muted">An active record of interactions requiring textile-level review.</p>
        <div class="controls">
          <button @click="logEvent()">Log Random Event</button>
          <button class="light" @click="clearLogs()">Clear Newest</button>
        </div>
        <table>
          <thead>
            <tr>
              <th>Time</th>
              <th>Wing</th>
              <th>Subject</th>
              <th>Observation</th>
              <th>Disposition</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="entry in logs" :key="entry.id">
              <tr>
                <td class="mono" x-text="entry.time"></td>
                <td x-text="entry.wing"></td>
                <td x-text="entry.subject"></td>
                <td x-text="entry.note"></td>
                <td><strong x-text="entry.state"></strong></td>
              </tr>
            </template>
          </tbody>
        </table>
        <p class="fine">Footnote C9: Entries are anonymized by replacing all names with loom-compatible descriptors.</p>
      </article>
    </section>

    <section id="access" class="dashboard">
      <article class="tile col-7">
        <h2 class="section-head">Program Access Plans</h2>
        <table>
          <thead>
            <tr>
              <th>Plan</th>
              <th>Monthly</th>
              <th>Included</th>
              <th>Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Observer Seat</strong></td>
              <td>$340</td>
              <td>2 audits, nightly digest, one seam transcript</td>
              <td>Clinical advisors</td>
            </tr>
            <tr>
              <td><strong>Containment Partner</strong></td>
              <td>$1,280</td>
              <td>12 audits, live console, foam resonance reports</td>
              <td>Hospital networks</td>
            </tr>
            <tr>
              <td><strong>Enterprise Dreamsafe</strong></td>
              <td>$4,900</td>
              <td>Unlimited audits, hotline, bespoke chamber calibration</td>
              <td>Campus systems</td>
            </tr>
          </tbody>
        </table>
        <p class="fine">Billing note: all plans include mandatory corridor etiquette orientation.</p>
      </article>

      <article class="tile col-5 dark">
        <h2 class="section-head" style="color:#fff8f0;">Confidence Adjuster</h2>
        <p class="muted" style="color:#fff8f0;">Set acceptable intuition overlap for your facility.</p>
        <label for="confidence" class="mono" style="color:#fff8f0;">Confidence: <span x-text="confidence + '%'">60%</span></label>
        <input id="confidence" type="range" min="5" max="99" step="1" x-model="confidence" />
        <p class="fine" style="color:#fff8f0;">Suggested by ethics board: 61% - 74% for first quarter adoption.</p>
        <div class="controls">
          <button class="light" @click="confidence = 67">Use Board Preset</button>
        </div>
      </article>
    </section>

    <section id="ethics" class="dashboard">
      <article class="tile col-6">
        <h2 class="section-head">Board Statements</h2>
        <div class="stack">
          <p class="quote">"The institute demonstrates measurable reductions in nocturnal misinformation events."</p>
          <p class="fine">Dr. Imani Hall, External Review Chair</p>
          <p class="quote">"Their pillow interview taxonomy is surprisingly reproducible across districts."</p>
          <p class="fine">Gerald Wren, Public Safety Procurement</p>
          <p class="quote">"We integrated their chamber protocol in four wings with immediate improvements."</p>
          <p class="fine">Sorin Vale, Meridian Clinical Group</p>
        </div>
      </article>

      <article class="tile col-6 olive" id="faq">
        <h2 class="section-head">FAQ</h2>
        <details>
          <summary><strong>Do you work with private residences?</strong></summary>
          <p>Yes. Home pilots start with non-invasive linen scans and two hallway interviews.</p>
        </details>
        <details>
          <summary><strong>How quickly can a team deploy?</strong></summary>
          <p>Deployment is typically 72 hours from contract signature and room geometry submission.</p>
        </details>
        <details>
          <summary><strong>Are your methods medically certified?</strong></summary>
          <p>Our methods are certified for infrastructure safety and behavioral forecasting, not diagnosis.</p>
        </details>
        <p class="fine">Footnote D4: Review packet available to licensed administrators upon request.</p>
      </article>
    </section>

    <footer>
      <p><strong>Northfield Somnolence Institute</strong> | 41 Quietline Avenue, Administrative Wing 3</p>
      <p class="mono">Contact: intake@nsi-labs.example | Hotline: +1 (555) 018-7721 | Registry: NSI-4471-A</p>
      <p class="fine">Legal: This portal is for trained operators. Do not negotiate with bedding without certified supervision.</p>
    </footer>
  </main>

  <script defer src="/assets/js/alpine.min.js"></script>
  <script src="/assets/js/gsap.min.js"></script>
  <script src="/assets/js/lucide.min.js"></script>
  <script>
    function instituteApp() {
      return {
        uptime: 99.2,
        chambers: 18,
        minutesSince: 22,
        directive: 'Observe seam patterns',
        quietProtocol: true,
        drift: 52,
        confidence: 67,
        timerSeconds: 421,
        archiveIn: 34,
        autoTicker: true,
        currentTicker: 0,
        tickerInterval: null,
        pulseInterval: null,
        bands: [
          { name: 'Memory Retention', value: 68 },
          { name: 'Whisper Echo', value: 41 },
          { name: 'Fiber Consensus', value: 77 },
          { name: 'Lint Forecast', value: 35 }
        ],
        ticker: [
          { signal: 'West Hall seam cluster entered synchronized silence', origin: 'Containment B', urgency: 'Moderate' },
          { signal: 'Two orthopedic units requested immediate ethics mediation', origin: 'Procurement Desk', urgency: 'High' },
          { signal: 'Cotton-poly blend showed predictable answer latency', origin: 'Lab Floor 2', urgency: 'Low' },
          { signal: 'Night team reported clear decline in rumor transfer', origin: 'District Pilot 7', urgency: 'Moderate' }
        ],
        logs: [
          { id: 1, time: '05:11:03', wing: 'B-2', subject: 'Contour Unit', note: 'Responded before question completion', state: 'Escalated' },
          { id: 2, time: '05:17:26', wing: 'A-5', subject: 'Travel Pillow', note: 'Requested hallway map twice', state: 'Observed' },
          { id: 3, time: '05:19:55', wing: 'C-1', subject: 'Foam Pair', note: 'Consensus reached after lullaby suppression', state: 'Resolved' }
        ],

        get formattedTimer() {
          const mins = Math.floor(this.timerSeconds / 60).toString().padStart(2, '0');
          const secs = (this.timerSeconds % 60).toString().padStart(2, '0');
          return `${mins}:${secs}`;
        },

        init() {
          this.pulseInterval = setInterval(() => {
            this.timerSeconds += 1;
            this.minutesSince += 1;
            this.drift = Math.max(4, Math.min(98, this.drift + (Math.random() > 0.5 ? 1 : -1)));
            this.archiveIn = Math.max(3, this.archiveIn + (Math.random() > 0.5 ? 1 : -1));
            this.uptime = Math.max(96.1, Math.min(99.9, +(this.uptime + (Math.random() - 0.5) * 0.1).toFixed(2)));
          }, 2000);

          this.tickerInterval = setInterval(() => {
            if (this.autoTicker) {
              this.nextTicker();
            }
          }, 3500);

          if (window.gsap) {
            gsap.from('.tile', {
              opacity: 0,
              y: 18,
              duration: 0.55,
              stagger: 0.04,
              ease: 'power2.out'
            });
          }

          if (window.lucide && typeof window.lucide.createIcons === 'function') {
            window.lucide.createIcons();
          }
        },

        setDirective(text) {
          this.directive = text;
        },

        panicSweep() {
          this.directive = 'Contain and isolate whisper vectors';
          this.drift = Math.min(98, this.drift + 11);
          this.quietProtocol = true;
          this.logEvent('Emergency seam check initiated', 'Escalated');
        },

        nextTicker() {
          this.currentTicker = (this.currentTicker + 1) % this.ticker.length;
        },

        prevTicker() {
          this.currentTicker = (this.currentTicker - 1 + this.ticker.length) % this.ticker.length;
        },

        shuffleBands() {
          this.bands = this.bands.map((b) => ({
            name: b.name,
            value: Math.max(18, Math.min(96, b.value + Math.floor(Math.random() * 21) - 10))
          }));
        },

        addMinutes(delta) {
          this.archiveIn = Math.max(3, this.archiveIn + delta);
        },

        logEvent(note = null, state = null) {
          const wings = ['A-2', 'A-6', 'B-1', 'B-4', 'C-3', 'D-2'];
          const subjects = ['Neck Pillow', 'Memory Foam Unit', 'Cooling Stack', 'Weighted Cushion', 'Guest Linen'];
          const notes = [
            'Requested additional ventilation before statement',
            'Displayed synchronized corner folding',
            'Repeating prior meeting agenda in reverse order',
            'Accepted recalibration after tea interval',
            'Produced highly specific corridor advice'
          ];
          const states = ['Observed', 'Resolved', 'Escalated'];
          const now = new Date();
          const time = [now.getHours(), now.getMinutes(), now.getSeconds()]
            .map((n) => String(n).padStart(2, '0'))
            .join(':');

          this.logs.unshift({
            id: now.getTime(),
            time,
            wing: wings[Math.floor(Math.random() * wings.length)],
            subject: subjects[Math.floor(Math.random() * subjects.length)],
            note: note || notes[Math.floor(Math.random() * notes.length)],
            state: state || states[Math.floor(Math.random() * states.length)]
          });

          if (this.logs.length > 9) {
            this.logs.pop();
          }
        },

        clearLogs() {
          if (this.logs.length > 0) {
            this.logs.pop();
          }
        }
      };
    }
  </script>
</body>
</html>
