<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lunar Regiment Atelier | Dr. Purrsephone Vellum</title>
  <link rel="stylesheet" href="/assets/css/pico.min.css" />
  <link rel="stylesheet" href="/assets/css/fonts.css" />
  <style>
    :root {
      --bg-0: #061326;
      --bg-1: #0a2240;
      --bg-2: #10335a;
      --panel: #0b2038;
      --panel-2: #102a46;
      --line: #1ac9a1;
      --line-2: #58f3d5;
      --text: #f2fbff;
      --text-2: #d5f3ee;
      --warn: #9dff6a;
      --danger: #ff5577;
      --shadow: #02101f;
      --sidebar: clamp(220px, 24vw, 310px);
      --radius: 18px;
      --moon: 0.6;
      --phase-glow: #54ffe8;
      --phase-core: #b0fff2;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
      overflow-x: hidden;
      background: radial-gradient(circle at 15% 20%, #113d67 0%, var(--bg-1) 28%, var(--bg-0) 68%),
                  linear-gradient(135deg, #061326 0%, #0d2e4e 50%, #08233c 100%);
      color: var(--text);
      font-family: "Space Grotesk", sans-serif;
      font-size: 16px;
      line-height: 1.4;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image:
        linear-gradient(90deg, #0f3658 1px, transparent 1px),
        linear-gradient(#0f3658 1px, transparent 1px);
      background-size: 38px 38px;
      mask-image: linear-gradient(to bottom, #000000 0%, #000000 55%, transparent 100%);
      z-index: 0;
    }

    .shell {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: var(--sidebar) minmax(0, 1fr);
      min-height: 100vh;
    }

    aside {
      border-right: 2px solid #1f4d74;
      background:
        linear-gradient(160deg, #071b31 0%, #0b2542 75%),
        repeating-linear-gradient(145deg, transparent 0 14px, #10355a 14px 16px);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .brand {
      border: 2px solid #2e698f;
      border-radius: var(--radius);
      padding: 1rem;
      background: linear-gradient(145deg, #0f2f4f 0%, #0c233b 100%);
      box-shadow: 0 12px 24px #041224;
      position: relative;
      isolation: isolate;
      overflow: hidden;
    }

    .brand::after {
      content: "";
      position: absolute;
      width: 120px;
      height: 120px;
      right: -35px;
      top: -35px;
      border-radius: 50%;
      background: radial-gradient(circle, #7dfff0 0%, #1ac9a1 45%, transparent 70%);
      filter: blur(2px);
      z-index: -1;
    }

    .brand h1 {
      margin: 0;
      font-size: clamp(1.1rem, 2vw, 1.4rem);
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #ffffff;
    }

    .brand p {
      margin: 0.4rem 0 0;
      color: #d8f6f0;
      font-size: 0.95rem;
    }

    .navblock {
      border: 1px solid #2a5d86;
      border-radius: 14px;
      padding: 0.65rem;
      background: #0b223a;
    }

    .navlink {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.7rem;
      border-radius: 12px;
      color: #ecffff;
      text-decoration: none;
      min-height: 44px;
      transition: background 200ms ease, transform 200ms ease, border-color 200ms ease;
      border: 1px solid transparent;
    }

    .navlink:hover,
    .navlink:focus-visible {
      background: linear-gradient(120deg, #133e64 0%, #0f324f 100%);
      border-color: #2ee0be;
      transform: translateX(3px);
      outline: none;
    }

    .status {
      margin-top: auto;
      border: 2px dashed #2f7a9e;
      border-radius: 14px;
      padding: 0.8rem;
      background: #0a2137;
    }

    .status strong {
      color: #ffffff;
      display: block;
      margin-bottom: 0.35rem;
    }

    .status p {
      margin: 0;
      color: #d4f7ef;
      font-size: 0.92rem;
    }

    main {
      padding: clamp(0.8rem, 2vw, 1.4rem);
      display: grid;
      gap: clamp(0.8rem, 1.8vw, 1.1rem);
    }

    .panel {
      background: linear-gradient(165deg, #0f2c4a 0%, #0b2238 100%);
      border: 2px solid #25577e;
      border-radius: var(--radius);
      box-shadow: 0 14px 26px #03101f;
      padding: clamp(0.9rem, 2vw, 1.2rem);
      overflow: hidden;
      position: relative;
    }

    .panel h2,
    .panel h3 {
      margin-top: 0;
      color: #ffffff;
    }

    .hero {
      display: grid;
      grid-template-columns: 1.15fr 1fr;
      gap: 1rem;
      align-items: stretch;
    }

    .hero-copy p {
      color: #dff8f3;
      max-width: 58ch;
      margin-bottom: 0.7rem;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.9rem;
    }

    .badge {
      background: linear-gradient(125deg, #12557c 0%, #0f3b61 100%);
      border: 1px solid #2fe8c3;
      color: #e8fffb;
      border-radius: 999px;
      padding: 0.32rem 0.68rem;
      font-size: 0.82rem;
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    .art-radar {
      border-radius: 16px;
      border: 2px solid #2b6993;
      min-height: 300px;
      position: relative;
      isolation: isolate;
      background:
        radial-gradient(circle at center, #0f4f67 0%, #0a2d49 35%, #091d33 70%),
        linear-gradient(145deg, #0b2b48 0%, #06172b 100%);
      overflow: hidden;
    }

    .art-radar::before,
    .art-radar::after {
      content: "";
      position: absolute;
      inset: 12%;
      border: 1px solid #2ebea8;
      border-radius: 50%;
      animation: breathe 4.4s ease-in-out infinite;
    }

    .art-radar::after {
      inset: 28%;
      animation-delay: 0.9s;
    }

    @keyframes breathe {
      0%, 100% { transform: scale(0.98); }
      50% { transform: scale(1.04); }
    }

    .moon {
      position: absolute;
      width: clamp(110px, 24vw, 180px);
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      left: 50%;
      top: 48%;
      transform: translate(-50%, -50%) rotate(calc(var(--moon) * 30deg));
      background: radial-gradient(circle at 35% 35%, var(--phase-core) 0%, var(--phase-glow) 58%, #167f79 100%);
      box-shadow: 0 0 28px #3cffe1, 0 0 56px #1bbda0;
      transition: transform 400ms ease, box-shadow 450ms ease;
    }

    .moon::before {
      content: "";
      position: absolute;
      inset: calc(14% + (1 - var(--moon)) * 15%);
      border-radius: 50%;
      background: #08233b;
      transform: translateX(calc(16% + (1 - var(--moon)) * 36%));
      transition: transform 400ms ease, inset 400ms ease;
    }

    .sweep {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 45%;
      height: 2px;
      background: linear-gradient(90deg, #8dffee 0%, #2cd8bd 65%, transparent 100%);
      transform-origin: 0 0;
      animation: sweep 5s linear infinite;
      box-shadow: 0 0 14px #3ff3da;
    }

    @keyframes sweep {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .controls {
      margin-top: 1rem;
      display: grid;
      gap: 0.6rem;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .control {
      background: #0a2136;
      border: 1px solid #2b6f99;
      border-radius: 12px;
      padding: 0.65rem;
      min-height: 44px;
    }

    .control label {
      display: block;
      font-size: 0.82rem;
      color: #d8f7ef;
      margin-bottom: 0.35rem;
    }

    .phase {
      width: 100%;
      accent-color: #6fffe8;
    }

    .toggles {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.4rem;
    }

    .pill {
      min-height: 44px;
      border-radius: 999px;
      border: 1px solid #2ccab0;
      background: #0f3a5b;
      color: #f4fffd;
      padding: 0.35rem 0.9rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform 180ms ease, background 220ms ease;
      font-size: 0.85rem;
    }

    .pill:hover,
    .pill:focus-visible {
      transform: translateY(-2px);
      background: #16587f;
      outline: none;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
    }

    .drop-card {
      background: linear-gradient(170deg, #102f4f 0%, #0a2238 90%);
      border: 1px solid #2d6f96;
      border-radius: 16px;
      padding: 0.8rem;
      position: relative;
      overflow: hidden;
      transition: transform 230ms ease, border-color 230ms ease, box-shadow 230ms ease;
    }

    .drop-card:hover {
      transform: translateY(-5px) rotate(-0.5deg);
      border-color: #53ffe4;
      box-shadow: 0 10px 24px #031629;
    }

    .drop-card::before {
      content: "";
      position: absolute;
      width: 150px;
      height: 150px;
      right: -40px;
      top: -60px;
      background: conic-gradient(from 130deg, #1fd2af 0%, #173e63 35%, #1fd2af 70%, #173e63 100%);
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
      opacity: 0.7;
    }

    .drop-title {
      margin: 0;
      font-size: 1.05rem;
      color: #ffffff;
      font-weight: 800;
      max-width: 25ch;
      position: relative;
      z-index: 1;
    }

    .drop-note {
      margin: 0.45rem 0;
      color: #d8f8f2;
      position: relative;
      z-index: 1;
    }

    .tagline {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.88rem;
      color: #d2fced;
      position: relative;
      z-index: 1;
    }

    .war-room {
      min-height: 290px;
      border-radius: 16px;
      border: 2px solid #2b6b92;
      background: linear-gradient(150deg, #0e2c4a 0%, #091f35 100%);
      position: relative;
      overflow: hidden;
    }

    .node {
      position: absolute;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #6fffe8;
      border: 2px solid #0a263f;
      box-shadow: 0 0 0 8px #1e5e74;
    }

    .node::after {
      content: attr(data-name);
      position: absolute;
      top: 20px;
      left: -8px;
      font-size: 0.78rem;
      background: #092237;
      color: #ecfffb;
      border: 1px solid #2fbfa8;
      border-radius: 8px;
      padding: 0.15rem 0.35rem;
      white-space: nowrap;
    }

    .node.a { top: 14%; left: 12%; }
    .node.b { top: 58%; left: 24%; }
    .node.c { top: 28%; left: 52%; }
    .node.d { top: 66%; left: 66%; }
    .node.e { top: 38%; left: 83%; }

    .route {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, #63ffe4 0%, #16af8f 100%);
      transform-origin: left center;
      box-shadow: 0 0 10px #52ffe2;
    }

    .r1 { left: 14%; top: 17%; width: 26%; transform: rotate(26deg); }
    .r2 { left: 25%; top: 60%; width: 30%; transform: rotate(-23deg); }
    .r3 { left: 54%; top: 31%; width: 16%; transform: rotate(36deg); }
    .r4 { left: 68%; top: 68%; width: 19%; transform: rotate(-58deg); }

    .route.pulse {
      animation: pulseLine 1.1s ease;
    }

    @keyframes pulseLine {
      0% { filter: brightness(1); }
      35% { filter: brightness(2.2); }
      100% { filter: brightness(1); }
    }

    .war-cta {
      position: absolute;
      left: 0.8rem;
      bottom: 0.8rem;
      min-height: 44px;
      border: 1px solid #3eeacc;
      background: #0f4167;
      color: #ffffff;
      border-radius: 12px;
      font-weight: 800;
      padding: 0.35rem 0.75rem;
      cursor: pointer;
    }

    .war-cta:hover,
    .war-cta:focus-visible {
      background: #185d89;
      outline: none;
    }

    .pricing-wrap {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.8rem;
    }

    .price-card {
      border: 1px solid #2d7098;
      background: linear-gradient(165deg, #0c2945 0%, #0a1f34 100%);
      border-radius: 14px;
      padding: 0.85rem;
    }

    .price-card h4 {
      margin: 0;
      color: #ffffff;
    }

    .amount {
      margin: 0.5rem 0;
      font-size: clamp(1.2rem, 2vw, 1.8rem);
      color: #7effe8;
      font-weight: 800;
    }

    .price-card p {
      margin: 0;
      color: #dbf8f3;
      font-size: 0.92rem;
    }

    .testi {
      display: grid;
      gap: 0.6rem;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .quote {
      border-left: 4px solid #52ffd9;
      background: #0a243c;
      border-radius: 8px;
      padding: 0.65rem;
      color: #f2fffd;
      font-size: 0.92rem;
    }

    details {
      border: 1px solid #2f7299;
      border-radius: 12px;
      background: #0a2238;
      padding: 0.4rem 0.7rem;
    }

    summary {
      cursor: pointer;
      color: #ffffff;
      font-weight: 700;
      min-height: 44px;
      display: flex;
      align-items: center;
    }

    details p {
      color: #def8f1;
      margin: 0.4rem 0 0.7rem;
    }

    .footer-note {
      text-align: center;
      color: #ddf9f2;
      font-size: 0.88rem;
      padding-bottom: 0.4rem;
    }

    .beige-alert {
      border: 1px solid #ff8da5;
      background: #371427;
      color: #ffffff;
      border-radius: 12px;
      padding: 0.55rem 0.7rem;
      font-weight: 700;
      margin-top: 0.7rem;
    }

    @media (max-width: 980px) {
      .shell {
        grid-template-columns: 1fr;
      }

      aside {
        border-right: 0;
        border-bottom: 2px solid #1f4d74;
      }

      .hero {
        grid-template-columns: 1fr;
      }

      .grid-2,
      .pricing-wrap,
      .testi {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 560px) {
      .controls {
        grid-template-columns: 1fr;
      }

      .badge {
        font-size: 0.76rem;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <aside>
      <div class="brand">
        <h1>Lunar Regiment Atelier</h1>
        <p>Dr. Purrsephone Vellum, Cat Therapist turned Quartermaster Couturier.</p>
      </div>

      <div class="navblock">
        <a class="navlink" href="#manifest"><i data-lucide="clipboard-list"></i> Manifest</a>
        <a class="navlink" href="#drops"><i data-lucide="shirt"></i> Full-Moon Drops</a>
        <a class="navlink" href="#routes"><i data-lucide="map"></i> Supply Routes</a>
        <a class="navlink" href="#retainers"><i data-lucide="coins"></i> Retainers</a>
        <a class="navlink" href="#faq"><i data-lucide="help-circle"></i> Questions</a>
      </div>

      <div class="status">
        <strong>Moon Protocol</strong>
        <p id="moonState">OPEN: full moon behavior active</p>
        <div class="beige-alert" id="beigeAlert" hidden>
          Beige detected in emotional radius. Session paused.
        </div>
      </div>
    </aside>

    <main>
      <section class="panel hero" id="manifest">
        <div class="hero-copy">
          <h2>Uniforms for Feelings You Refuse to Repress</h2>
          <p>I used to counsel anxious tabbies. Then one patient hissed at a beige throw pillow for 11 straight minutes. He was right. Beige is emotional avoidance.</p>
          <p>Now I issue moon-licensed garments for civilians who want structure, drama, and zero neutrality. We only cut fabric when the moon is full. Boundaries are therapeutic.</p>
          <div class="badge-row">
            <span class="badge">No Beige Since 2021</span>
            <span class="badge">ISO 9001: Feline Feelings</span>
            <span class="badge">Night Shift Tailoring</span>
          </div>
          <div class="controls">
            <div class="control">
              <label for="phaseInput">Moon Permission Index</label>
              <input id="phaseInput" class="phase" type="range" min="0" max="100" value="60" />
            </div>
            <div class="control">
              <label>Rapid Commands</label>
              <div class="toggles">
                <button class="pill" type="button" id="moonToggle">Toggle Moon</button>
                <button class="pill" type="button" id="beigeToggle">Simulate Beige Leak</button>
              </div>
            </div>
          </div>
        </div>

        <div class="art-radar" aria-label="Moon operations display">
          <div class="sweep"></div>
          <div class="moon" id="moonOrb"></div>
        </div>
      </section>

      <section class="grid-2" id="drops">
        <article class="panel">
          <h3>Tonight's Drop Board</h3>
          <div class="drop-card">
            <p class="drop-title">Operation Soft Claw Trench Mk.IV</p>
            <p class="drop-note">Waterproof, biolum cuff piping, hidden snack map pocket.</p>
            <p class="tagline"><i data-lucide="moon-star"></i> $247.99 • fitting includes one corrective stare</p>
          </div>
          <div class="drop-card">
            <p class="drop-title">Anti-Neutral Beret (Field Issue)</p>
            <p class="drop-note">Will not match your couch. That is intentional and clinical.</p>
            <p class="tagline"><i data-lucide="sparkles"></i> $68.00 • ships with moon-ink care card</p>
          </div>
          <div class="drop-card">
            <p class="drop-title">Therapy Cargo Skirt, 9-Pocket Variant</p>
            <p class="drop-note">Pocket #6 is for apology letters you never send.</p>
            <p class="tagline"><i data-lucide="package"></i> $119.40 • hemline calibrated to confidence</p>
          </div>
        </article>

        <article class="panel" id="routes">
          <h3>Logistics Theater</h3>
          <p>Every route avoids neutral-toned districts. Our drivers call this spiritual compliance.</p>
          <div class="war-room" id="warRoom">
            <div class="route r1"></div>
            <div class="route r2"></div>
            <div class="route r3"></div>
            <div class="route r4"></div>
            <div class="node a" data-name="Port Paws"></div>
            <div class="node b" data-name="Thread Fort"></div>
            <div class="node c" data-name="Moon Depot"></div>
            <div class="node d" data-name="Dye Barracks"></div>
            <div class="node e" data-name="Runway Nest"></div>
            <button class="war-cta" id="routePulse" type="button">Run Convoy Drill</button>
          </div>
        </article>
      </section>

      <section class="panel" id="retainers">
        <h3>Retainers</h3>
        <div class="pricing-wrap">
          <article class="price-card">
            <h4>Moon Cadet</h4>
            <p class="amount">$47.99/mo</p>
            <p>One emergency outfit per full moon and a monthly voicemail where I tell you beige is not your friend.</p>
          </article>
          <article class="price-card">
            <h4>Captain of Textiles</h4>
            <p class="amount">$113.00/mo</p>
            <p>Priority tailoring, panic-hem hotline, and my annotated list of suspiciously beige venues to avoid.</p>
          </article>
          <article class="price-card">
            <h4>Admiral of Feelings</h4>
            <p class="amount">$301.77/mo</p>
            <p>Custom uniform set, quarterly mood audit, plus I personally glare at any taupe near your closet.</p>
          </article>
        </div>
      </section>

      <section class="panel">
        <h3>Witness Statements</h3>
        <div class="testi">
          <blockquote class="quote">"Dr. Vellum made me burn my beige cardigan. I got promoted two weeks later."<br><strong>- Lark, municipal diver</strong></blockquote>
          <blockquote class="quote">"I arrived for pants. I left with boundaries and a cape."<br><strong>- Dev, former people-pleaser</strong></blockquote>
          <blockquote class="quote">"My cat saluted when she saw the new trench coat."<br><strong>- Io, hobby cartographer</strong></blockquote>
        </div>
      </section>

      <section class="panel" id="faq">
        <h3>Questions You Keep Asking</h3>
        <details>
          <summary>Do you ever open on non-full-moon nights?</summary>
          <p>No. Last time we tried, someone requested "tasteful sand" and the sewing machine cried.</p>
        </details>
        <details>
          <summary>Can I order beige if I promise to style it ironically?</summary>
          <p>No. Irony is not a pigment exemption.</p>
        </details>
        <details>
          <summary>Are you actually a licensed cat therapist?</summary>
          <p>Yes. License #CAT-4421. Patients still send me hairball-shaped thank-you cards.</p>
        </details>
      </section>

      <p class="footer-note">Lunar Regiment Atelier, Dock 7, North Breakwater. Open only when the moon signs the timesheet.</p>
    </main>
  </div>

  <script src="/assets/js/gsap.min.js" defer></script>
  <script src="/assets/js/lucide.min.js" defer></script>
  <script>
    window.addEventListener("DOMContentLoaded", function () {
      if (window.lucide && typeof window.lucide.createIcons === "function") {
        window.lucide.createIcons();
      }

      var root = document.documentElement;
      var moonOrb = document.getElementById("moonOrb");
      var phaseInput = document.getElementById("phaseInput");
      var moonToggle = document.getElementById("moonToggle");
      var beigeToggle = document.getElementById("beigeToggle");
      var moonState = document.getElementById("moonState");
      var beigeAlert = document.getElementById("beigeAlert");
      var routePulse = document.getElementById("routePulse");
      var routes = Array.prototype.slice.call(document.querySelectorAll(".route"));
      var moonOpen = true;
      var beigeDetected = false;

      function setMoon(value) {
        var normalized = Math.max(0, Math.min(1, value / 100));
        root.style.setProperty("--moon", normalized.toFixed(2));
        var glowA = 26 + normalized * 26;
        var glowB = 48 + normalized * 42;
        moonOrb.style.boxShadow = "0 0 " + glowA + "px #3cffe1, 0 0 " + glowB + "px #1bbda0";
      }

      phaseInput.addEventListener("input", function (e) {
        setMoon(Number(e.target.value));
      });

      moonToggle.addEventListener("click", function () {
        moonOpen = !moonOpen;
        moonState.textContent = moonOpen ? "OPEN: full moon behavior active" : "LOCKED: no moon, no hems";
      });

      beigeToggle.addEventListener("click", function () {
        beigeDetected = !beigeDetected;
        beigeAlert.hidden = !beigeDetected;
      });

      routePulse.addEventListener("click", function () {
        routes.forEach(function (line, idx) {
          setTimeout(function () {
            line.classList.remove("pulse");
            void line.offsetWidth;
            line.classList.add("pulse");
          }, idx * 120);
        });
      });

      setMoon(Number(phaseInput.value));

      if (window.gsap) {
        gsap.fromTo(".panel", { y: 26, opacity: 0 }, {
          y: 0,
          opacity: 1,
          duration: 0.7,
          stagger: 0.08,
          ease: "power2.out",
          clearProps: "opacity,transform"
        });

        gsap.fromTo(".navlink", { x: -20, opacity: 0 }, {
          x: 0,
          opacity: 1,
          duration: 0.45,
          stagger: 0.05,
          ease: "power1.out",
          clearProps: "opacity,transform"
        });
      }
    });
  </script>
</body>
</html>
