<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bureaucratic Nostalgia as a Service — Est. 2023</title>
<link rel="stylesheet" href="/assets/css/fonts.css">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #F5ECD7;
  --text: #2B2D33;
  --text-light: #6B6E76;
  --accent: #C4A24E;
  --red: #8B1A1A;
  --card: #E8DCC8;
  --font-body: 'Fira Code', monospace;
  --font-heading: 'DM Serif Display', serif;
  --font-hand: 'Caveat', cursive;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  font-size: 16px;
  line-height: 1.7;
  min-height: 100vh;
}

.page-wrapper {
  max-width: 720px;
  margin: 0 auto;
  padding: 40px 20px 60px 60px;
  position: relative;
}

@media (max-width: 768px) {
  .page-wrapper { padding: 24px 16px 48px 16px; }
}

/* Hole-punch margin */
.page-wrapper::before {
  content: '';
  position: absolute;
  left: 28px;
  top: 80px;
  bottom: 80px;
  width: 2px;
  border-left: 2px solid #D4C9B0;
  pointer-events: none;
}

@media (max-width: 768px) {
  .page-wrapper::before { display: none; }
}

/* Section separator */
.section-sep {
  border: none;
  border-top: 2px dashed #C4B99A;
  margin: 48px 0;
  opacity: 0.6;
}

/* ===== HEADER / LETTERHEAD ===== */
.letterhead {
  text-align: center;
  padding: 32px 0 24px;
  position: relative;
}

.letterhead-name {
  font-family: var(--font-heading);
  font-size: clamp(1.6rem, 4vw, 2.4rem);
  color: var(--text);
  letter-spacing: 0.02em;
  line-height: 1.2;
  margin-bottom: 8px;
}

.letterhead-est {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-light);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  margin-bottom: 6px;
}

.letterhead-address {
  font-family: var(--font-body);
  font-size: 12px;
  color: var(--text-light);
  margin-bottom: 16px;
}

.letterhead-rule {
  width: 60%;
  margin: 0 auto;
  border: none;
  border-top: 2px solid var(--text);
  margin-bottom: 6px;
}

.letterhead-rule-thin {
  width: 50%;
  margin: 0 auto;
  border: none;
  border-top: 1px solid var(--text-light);
}

.lynx-badge {
  position: absolute;
  top: 8px;
  right: 0;
  background: var(--card);
  border: 1px solid var(--text-light);
  font-family: var(--font-body);
  font-size: 9px;
  color: var(--text-light);
  padding: 4px 8px;
  transform: rotate(3deg);
  white-space: nowrap;
}

.margin-note {
  font-family: var(--font-hand);
  font-size: clamp(16px, 2.5vw, 20px);
  color: var(--text-light);
  position: relative;
  text-align: left;
  margin-top: 16px;
  padding-left: 8px;
}

.margin-note::before {
  content: '*';
  color: var(--accent);
  margin-right: 4px;
}

/* ===== AGNES'S STATEMENT ===== */
.statement {
  position: relative;
}

.statement p {
  margin-bottom: 20px;
  font-size: 14px;
  line-height: 1.8;
}

@media (max-width: 768px) {
  .statement p { font-size: 14px; }
}

.stamp-inline {
  display: inline-block;
  font-family: var(--font-heading);
  font-weight: 700;
  color: var(--red);
  border: 2px solid var(--red);
  padding: 2px 8px;
  font-size: 13px;
  letter-spacing: 0.08em;
  transform: rotate(-2deg);
  white-space: nowrap;
  line-height: 1.4;
}

.stamp-inline.rot-pos { transform: rotate(2.5deg); }
.stamp-inline.rot-neg { transform: rotate(-3deg); }

.margin-note-right {
  font-family: var(--font-hand);
  font-size: clamp(16px, 2.5vw, 19px);
  color: var(--red);
  text-align: right;
  margin: 12px 0;
}

/* ===== MICROFICHE VIEWER ===== */
.microfiche-section {
  background: var(--card);
  border: 1px solid var(--text-light);
  padding: 24px;
}

.microfiche-section h2 {
  font-family: var(--font-heading);
  font-size: clamp(1.3rem, 3vw, 1.6rem);
  margin-bottom: 16px;
  color: var(--text);
}

.microfiche-viewer {
  background: #0A0F0A;
  border-radius: 8px;
  padding: 24px;
  position: relative;
  overflow: hidden;
  min-height: 200px;
  box-shadow: inset 0 0 40px rgba(34, 197, 94, 0.08);
}

.microfiche-viewer::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 8px;
  box-shadow: inset 0 0 60px rgba(34, 197, 94, 0.06);
  pointer-events: none;
  z-index: 1;
}

.microfiche-text {
  font-family: var(--font-body);
  font-size: 13px;
  color: #7EC87E;
  line-height: 1.7;
  position: relative;
  z-index: 2;
  transition: opacity 0.3s;
}

.microfiche-text .doc-title {
  color: #A3D9A3;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  margin-bottom: 10px;
  display: block;
}

/* Schmear overlays */
.schmear-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  border-radius: 8px;
  transition: opacity 0.8s ease, filter 0.8s ease;
}

.schmear-grain {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E");
  background-size: 128px 128px;
  opacity: 0;
}

.schmear-scratches {
  opacity: 0;
}

.schmear-scratches::before,
.schmear-scratches::after {
  content: '';
  position: absolute;
  background: rgba(200, 200, 180, 0.12);
}

.schmear-scratches::before {
  width: 1px; height: 80%;
  top: 10%; left: 35%;
  transform: rotate(2deg);
}

.schmear-scratches::after {
  width: 1px; height: 60%;
  top: 20%; left: 68%;
  transform: rotate(-1deg);
}

/* Schmear levels */
.viewer-wrap[data-schmear="handled"] .schmear-grain { opacity: 0.5; }
.viewer-wrap[data-schmear="handled"] .schmear-scratches { opacity: 1; }
.viewer-wrap[data-schmear="handled"] .microfiche-viewer { filter: sepia(0.1); }

.viewer-wrap[data-schmear="basement"] .schmear-grain { opacity: 1; }
.viewer-wrap[data-schmear="basement"] .schmear-scratches { opacity: 1; }
.viewer-wrap[data-schmear="basement"] .microfiche-viewer { filter: sepia(0.25) blur(0.4px) brightness(0.92); }

.schmear-controls {
  display: flex;
  gap: 12px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.schmear-btn {
  font-family: var(--font-body);
  font-size: 11px;
  color: var(--text);
  background: var(--bg);
  border: 1px solid var(--text-light);
  padding: 8px 14px;
  cursor: pointer;
  transition: all 0.3s;
  min-height: 44px;
  display: flex;
  align-items: center;
}

.schmear-btn:hover { border-color: var(--accent); color: var(--accent); }
.schmear-btn.active {
  background: var(--text);
  color: var(--bg);
  border-color: var(--text);
}

/* Scanline flicker */
.scanlines {
  position: absolute;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  opacity: 0;
  background: repeating-linear-gradient(
    transparent 0px,
    transparent 2px,
    rgba(34, 197, 94, 0.03) 2px,
    rgba(34, 197, 94, 0.03) 4px
  );
  border-radius: 8px;
}

/* ===== FORM 38-B ===== */
.form-section {
  background: var(--card);
  border: 1px solid var(--text-light);
  padding: 24px;
  position: relative;
}

.form-section h2 {
  font-family: var(--font-heading);
  font-size: clamp(1.2rem, 3vw, 1.5rem);
  margin-bottom: 4px;
}

.form-section .form-subtitle {
  font-size: 12px;
  color: var(--text-light);
  margin-bottom: 20px;
  letter-spacing: 0.05em;
}

.form-group {
  margin-bottom: 18px;
}

.form-group label {
  display: block;
  font-family: var(--font-body);
  font-size: 12px;
  color: var(--text);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  font-family: var(--font-body);
  font-size: 14px;
  padding: 10px 12px;
  border: 1px solid var(--text-light);
  background: var(--bg);
  color: var(--text);
  transition: border-color 0.3s;
  min-height: 44px;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--accent);
}

.form-group textarea {
  min-height: 80px;
  resize: vertical;
}

.form-group select {
  cursor: pointer;
  appearance: auto;
}

.submit-btn {
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--bg);
  background: var(--text);
  border: 2px solid var(--text);
  padding: 14px 24px;
  cursor: pointer;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  transition: all 0.3s;
  min-height: 44px;
  width: 100%;
}

.submit-btn:hover {
  background: var(--accent);
  border-color: var(--accent);
}

.submit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Progress bar */
.progress-wrap {
  margin-top: 16px;
  display: none;
}

.progress-wrap.visible { display: block; }

.progress-label {
  font-size: 11px;
  color: var(--text-light);
  margin-bottom: 6px;
  letter-spacing: 0.1em;
}

.progress-bar {
  width: 100%;
  height: 18px;
  background: var(--bg);
  border: 1px solid var(--text-light);
  position: relative;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.3s linear;
}

/* Received stamp */
.received-stamp {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-4deg);
  font-family: var(--font-heading);
  font-size: clamp(2rem, 6vw, 3.5rem);
  color: var(--red);
  border: 4px solid var(--red);
  padding: 8px 24px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  opacity: 0;
  pointer-events: none;
  z-index: 10;
  white-space: nowrap;
  text-shadow: 0 0 4px rgba(139, 26, 26, 0.3);
}

.receipt-info {
  margin-top: 16px;
  text-align: center;
  display: none;
}

.receipt-info .receipt-number {
  font-size: 12px;
  color: var(--text-light);
  letter-spacing: 0.08em;
}

.receipt-info .receipt-note {
  font-family: var(--font-hand);
  font-size: 20px;
  color: var(--text-light);
  margin-top: 8px;
}

/* ===== PNEUMATIC TUBE ===== */
.pneumatic-section {
  background: var(--card);
  border: 1px solid var(--text-light);
  padding: 24px;
  text-align: center;
}

.pneumatic-section h3 {
  font-family: var(--font-heading);
  font-size: clamp(1.1rem, 2.5vw, 1.4rem);
  margin-bottom: 12px;
}

.pneumatic-section .warranty-text {
  font-size: 13px;
  line-height: 1.6;
  margin-bottom: 16px;
}

.tube-container {
  width: 100%;
  height: 60px;
  margin: 16px 0;
  position: relative;
  overflow: hidden;
}

.tube-container svg {
  width: 100%;
  height: 100%;
}

.pneumatic-fine-print {
  font-size: 9px;
  color: var(--text-light);
  line-height: 1.5;
  margin-top: 12px;
}

/* ===== AFFIDAVIT GENERATOR ===== */
.affidavit-section {
  background: var(--card);
  border: 1px solid var(--text-light);
  padding: 24px;
  position: relative;
}

.affidavit-section h2 {
  font-family: var(--font-heading);
  font-size: clamp(1.2rem, 3vw, 1.5rem);
  margin-bottom: 4px;
}

.beta-badge {
  display: inline-block;
  font-family: var(--font-body);
  font-size: 10px;
  color: var(--red);
  border: 1px solid var(--red);
  padding: 2px 6px;
  margin-left: 8px;
  vertical-align: middle;
  letter-spacing: 0.1em;
}

.affidavit-inputs {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
  margin: 16px 0;
}

@media (max-width: 520px) {
  .affidavit-inputs { grid-template-columns: 1fr; }
}

.affidavit-inputs input {
  font-family: var(--font-body);
  font-size: 14px;
  padding: 10px 12px;
  border: 1px solid var(--text-light);
  background: var(--bg);
  color: var(--text);
  min-height: 44px;
  width: 100%;
}

.affidavit-inputs input:focus {
  outline: none;
  border-color: var(--accent);
}

.generate-btn {
  font-family: var(--font-body);
  font-size: 12px;
  color: var(--bg);
  background: var(--red);
  border: 2px solid var(--red);
  padding: 12px 20px;
  cursor: pointer;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  min-height: 44px;
  transition: all 0.3s;
}

.generate-btn:hover { background: #A52222; border-color: #A52222; }

.affidavit-output {
  margin-top: 20px;
  display: none;
  position: relative;
}

.affidavit-output.visible { display: block; }

.affidavit-doc {
  border: 2px solid var(--text);
  padding: 24px;
  background: var(--bg);
  font-size: 13px;
  line-height: 1.7;
  position: relative;
}

.affidavit-doc .doc-header {
  text-align: center;
  font-family: var(--font-heading);
  font-size: 16px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  border-bottom: 1px solid var(--text);
  padding-bottom: 12px;
  margin-bottom: 16px;
}

.affidavit-doc .doc-body {
  font-family: var(--font-body);
  text-align: justify;
}

.affidavit-doc .doc-body p { margin-bottom: 12px; }

.affidavit-doc .doc-date {
  text-align: right;
  font-size: 11px;
  color: var(--text-light);
  margin-top: 16px;
}

.wax-seal {
  position: absolute;
  bottom: 16px;
  left: 16px;
  width: 48px;
  height: 48px;
}

.beta-stamp-overlay {
  position: absolute;
  top: 12px;
  right: -8px;
  font-family: var(--font-heading);
  font-size: 14px;
  color: var(--red);
  border: 2px solid var(--red);
  padding: 4px 10px;
  transform: rotate(12deg);
  letter-spacing: 0.06em;
  background: rgba(245, 236, 215, 0.92);
  white-space: nowrap;
  z-index: 5;
}

/* ===== FOOTER ===== */
.footer {
  text-align: center;
  padding: 32px 0 16px;
}

.footer-sponsor {
  font-size: 11px;
  color: var(--text-light);
  margin-bottom: 12px;
  letter-spacing: 0.04em;
}

.footer-logo {
  margin: 12px auto;
}

.footer-copyright {
  font-size: 11px;
  color: var(--text-light);
  margin-bottom: 12px;
}

.footer-dedication {
  font-family: var(--font-hand);
  font-size: clamp(18px, 3vw, 24px);
  color: var(--text);
}

/* Utility */
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
}
</style>
</head>
<body>

<div class="page-wrapper" x-data="bureaucracy()">

  <!-- SECTION 1: LETTERHEAD -->
  <header class="letterhead">
    <div class="lynx-badge">✓ Lynx Compatible!</div>
    <div class="letterhead-est">DEPARTMENT OF ANALOG AFFAIRS</div>
    <h1 class="letterhead-name">Bureaucratic Nostalgia<br>as a Service</h1>
    <div class="letterhead-est">Est. 2023 — All Inquiries Processed in Order Received</div>
    <hr class="letterhead-rule">
    <hr class="letterhead-rule-thin">
    <div class="letterhead-address">Suite 38-B, The Plumtree Municipal Annex &bull; Third Floor, Past the Water Fountain That Doesn't Work</div>
    <div class="margin-note">Dad would have hated this website. He would have loved what it's about.</div>
  </header>

  <hr class="section-sep">

  <!-- SECTION 2: AGNES'S STATEMENT -->
  <section class="statement">
    <p>My name is Agnes Plumtree. For thirty years I watched my father come home with grey fingertips and the faint smell of municipal ink on his collar. He processed Form 38-B revisions for the county — a document so obscure that even the people who mandated it couldn't tell you what it was for. He never complained. He'd sit at the kitchen table, eat his dinner, and say: <span class="stamp-inline rot-neg">POINTLESS ON PURPOSE</span> was still a kind of purpose.</p>

    <p>When he died in 2019, I inherited three boxes of microfiche, a rubber stamp collection that could fill a small museum, and a growing suspicion that the world had gotten too fast for its own good. Everything now takes one click. One tap. One swipe. Nobody waits for anything, and nobody has to. The county digitized Form 38-B in 2014. Five hundred and twelve revisions, gone. Replaced by a dropdown menu and an auto-generated confirmation email. My father's entire career, compressed into a modal dialog.</p>

    <p>So in 2023, at 3 AM, sleepless and unreasonably angry at a self-checkout kiosk I'd encountered earlier that day, I built this. Bureaucratic Nostalgia as a Service. We simulate the complete 1947-era paperwork experience — microfiche viewer included — because some of us need to be reminded that there was dignity in doing something slowly, carefully, and for no particularly good reason. <span class="stamp-inline rot-pos">FILED UNDER: DIGNITY</span></p>

    <p>Every form on this site is useless. Every affidavit is legally meaningless. Every pneumatic tube delivery is fiction. That is exactly the point. My father found grace in the trivial, pride in the meticulous, and a strange kind of peace in being the last person in a long chain of people who all agreed to take something pointless very seriously. I'm trying to build a monument to that. You're welcome to visit. Take a number. We'll get to you.</p>

    <div class="margin-note-right">Bertram, if you're reading this, carbon copies are a fad.</div>
  </section>

  <hr class="section-sep">

  <!-- SECTION 3: MICROFICHE VIEWER -->
  <section class="microfiche-section">
    <h2>Microfiche Viewer — Terminal 3</h2>
    <div class="viewer-wrap" :data-schmear="schmearLevel">
      <div class="microfiche-viewer">
        <div class="schmear-overlay schmear-grain"></div>
        <div class="schmear-overlay schmear-scratches"></div>
        <div class="scanlines" id="scanlines"></div>
        <div class="microfiche-text" id="microfiche-text">
          <span class="doc-title" x-text="currentDoc.title"></span>
          <span x-html="currentDoc.body"></span>
        </div>
      </div>
      <div class="schmear-controls">
        <button class="schmear-btn" :class="{ active: schmearLevel === 'pristine' }" @click="schmearLevel = 'pristine'">Pristine (Suspicious)</button>
        <button class="schmear-btn" :class="{ active: schmearLevel === 'handled' }" @click="schmearLevel = 'handled'">Handled (Authentic)</button>
        <button class="schmear-btn" :class="{ active: schmearLevel === 'basement' }" @click="schmearLevel = 'basement'">Basement Storage (1947)</button>
      </div>
    </div>
    <div class="margin-note" style="margin-top:14px;">The Microfiche Schmear™ — because pristine records are inherently suspect.</div>
  </section>

  <hr class="section-sep">

  <!-- SECTION 4: FORM 38-B -->
  <section class="form-section" id="form38b">
    <h2>Form 38-B, Revision Q</h2>
    <div class="form-subtitle">MUNICIPAL INQUIRY — FOR INTERNAL USE ONLY (AND YET HERE WE ARE)</div>

    <div class="form-group">
      <label for="f-name">Full Legal Name (Including Middle Initials You Forgot You Had)</label>
      <input type="text" id="f-name" x-model="formData.name" placeholder="e.g. Margaret J. K. L. Farnsworth">
    </div>

    <div class="form-group">
      <label for="f-purpose">Purpose of Inquiry (Be Vague)</label>
      <input type="text" id="f-purpose" x-model="formData.purpose" placeholder="e.g. General unease">
    </div>

    <div class="form-group">
      <label for="f-copies">Number of Copies Required (Minimum 3)</label>
      <input type="number" id="f-copies" x-model="formData.copies" min="3" placeholder="3">
    </div>

    <div class="form-group">
      <label for="f-stamp">Preferred Stamp Color</label>
      <select id="f-stamp" x-model="formData.stampColor">
        <option value="">— Select —</option>
        <option value="Red">Red</option>
        <option value="Blue">Blue</option>
        <option value="Faded Red">Faded Red</option>
        <option value="Illegible">Illegible</option>
      </select>
    </div>

    <div class="form-group">
      <label for="f-remarks">Additional Remarks (Will Not Be Read)</label>
      <textarea id="f-remarks" x-model="formData.remarks" placeholder="Please use complete sentences. Or don't. Nobody will check."></textarea>
    </div>

    <button class="submit-btn" @click="submitForm()" :disabled="formProcessing">
      <span x-text="formProcessing ? 'PROCESSING...' : 'SUBMIT FOR PROCESSING (Est. 6-8 Weeks)'"></span>
    </button>

    <div class="progress-wrap" :class="{ visible: formProcessing }">
      <div class="progress-label">PROCESSING — PLEASE DO NOT CLOSE THIS WINDOW OR MOVE OR BREATHE</div>
      <div class="progress-bar">
        <div class="progress-fill" :style="'width:' + formProgress + '%'"></div>
      </div>
    </div>

    <div class="received-stamp" id="received-stamp">RECEIVED</div>

    <div class="receipt-info" :style="formDone ? 'display:block' : 'display:none'">
      <div class="receipt-number">Receipt No. <span x-text="receiptNumber"></span></div>
      <div class="receipt-note">Your form has been filed. Sincerely, nobody.</div>
    </div>
  </section>

  <hr class="section-sep">

  <!-- SECTION 5: PNEUMATIC TUBE PROMISE -->
  <section class="pneumatic-section">
    <h3>The Pneumatic Tube Promise™</h3>
    <p class="warranty-text">All digital paperwork submitted through this portal is delivered via our proprietary Virtual Pneumatic Tube Network (VPTN). Your documents travel at the speed of imagination through 2.4 miles of fictional copper tubing.</p>
    <div class="tube-container">
      <svg viewBox="0 0 600 60" preserveAspectRatio="xMidYMid meet" id="tube-svg">
        <!-- Tube body -->
        <rect x="0" y="20" width="600" height="20" rx="10" fill="none" stroke="#6B6E76" stroke-width="1.5"/>
        <!-- Station bump -->
        <circle cx="300" cy="30" r="14" fill="none" stroke="#6B6E76" stroke-width="1.5"/>
        <line x1="290" y1="30" x2="310" y2="30" stroke="#6B6E76" stroke-width="1"/>
        <!-- Canister -->
        <g id="canister">
          <rect x="-12" y="-7" width="24" height="14" rx="7" fill="#C4A24E" stroke="#2B2D33" stroke-width="1"/>
          <line x1="-4" y1="-4" x2="-4" y2="4" stroke="#2B2D33" stroke-width="0.8" opacity="0.5"/>
          <line x1="4" y1="-4" x2="4" y2="4" stroke="#2B2D33" stroke-width="0.8" opacity="0.5"/>
        </g>
      </svg>
    </div>
    <div class="pneumatic-fine-print">Delivery times are fictional. No actual tubes were harmed. The whooshing sound you think you hear is your own longing for a mechanical world. VPTN is not a real network. Agnes is not a licensed tube operator. Side effects may include nostalgia, mild wistfulness, and an urge to purchase carbon paper.</div>
  </section>

  <hr class="section-sep">

  <!-- SECTION 6: AFFIDAVIT GENERATOR -->
  <section class="affidavit-section">
    <h2>Affidavit Generator <span class="beta-badge">BETA</span></h2>
    <p style="font-size:13px;color:var(--text-light);margin:8px 0 0;">Enter three keywords. We will generate a legally meaningless document of considerable gravitas.</p>
    <div class="affidavit-inputs">
      <input type="text" x-model="affKeywords[0]" placeholder="Keyword 1">
      <input type="text" x-model="affKeywords[1]" placeholder="Keyword 2">
      <input type="text" x-model="affKeywords[2]" placeholder="Keyword 3">
    </div>
    <button class="generate-btn" @click="generateAffidavit()">GENERATE AFFIDAVIT</button>

    <div class="affidavit-output" :class="{ visible: affidavitVisible }">
      <div class="affidavit-doc">
        <div class="doc-header">Sworn Affidavit</div>
        <div class="doc-body" x-html="affidavitText"></div>
        <div class="doc-date" x-text="affidavitDate"></div>
        <!-- Wax seal SVG -->
        <svg class="wax-seal" viewBox="0 0 48 48">
          <circle cx="24" cy="24" r="22" fill="#8B1A1A" opacity="0.85"/>
          <circle cx="24" cy="24" r="16" fill="none" stroke="#F5ECD7" stroke-width="1" opacity="0.5"/>
          <text x="24" y="28" text-anchor="middle" fill="#F5ECD7" font-family="DM Serif Display, serif" font-size="11">AP</text>
        </svg>
        <div class="beta-stamp-overlay">BETA — NOT LEGALLY BINDING</div>
      </div>
    </div>
  </section>

  <hr class="section-sep">

  <!-- SECTION 7: FOOTER -->
  <footer class="footer">
    <div class="footer-sponsor">Sponsored by the Society for the Preservation of Carbon Paper Odors</div>
    <!-- Nose-over-paper logo -->
    <svg class="footer-logo" width="60" height="48" viewBox="0 0 60 48">
      <rect x="15" y="30" width="30" height="3" rx="1" fill="#6B6E76"/>
      <rect x="17" y="34" width="26" height="2" rx="1" fill="#6B6E76" opacity="0.6"/>
      <rect x="19" y="37" width="22" height="2" rx="1" fill="#6B6E76" opacity="0.4"/>
      <path d="M30 28 Q26 20 28 14 Q30 8 33 14 Q35 20 30 28Z" fill="none" stroke="#6B6E76" stroke-width="1.5"/>
      <circle cx="28" cy="10" r="1.5" fill="#6B6E76" opacity="0.4"/>
    </svg>
    <div class="footer-copyright">© 2023–2025 Agnes Plumtree. All forms reserved.</div>
    <div class="footer-dedication">For Dad. Who never rushed.</div>
  </footer>

</div>

<script src="/assets/js/gsap.min.js"></script>
<script src="/assets/js/alpine.min.js" defer></script>
<script>
document.addEventListener('alpine:init', function() {
  Alpine.data('bureaucracy', function() {
    return {
      // Microfiche
      schmearLevel: 'pristine',
      docIndex: 0,
      docs: [
        {
          title: 'ZONING VARIANCE REQUEST — FILE #ZV-1947-0338',
          body: 'Petitioner requests variance to construct a fence exceeding the statutory limit of 4 feet by approximately 6 inches. Petitioner claims the additional height is necessary "to keep the Hendersons\' dog from expressing opinions about my tomatoes." Request has been under review since March. It is now November. The dog has moved.'
        },
        {
          title: 'MEETING MINUTES — SUBCOMMITTEE ON INTERDEPARTMENTAL MEMO FORMAT',
          body: 'Meeting called to order at 2:14 PM. Quorum disputed for eleven minutes. It was moved that all future memos shall use 1.5-inch margins instead of 1.25-inch margins. Motion tabled pending formation of a margin review task force. Doris brought cookies. They were dry but appreciated. Meeting adjourned at 4:47 PM. Nothing was decided.'
        },
        {
          title: 'FORM 38-B REVISION LOG — ENTRY #512',
          body: 'Revision Q approved after 18 months of committee review. Changes from Revision P: the word "hereafter" on line 7 has been replaced with "hereinafter." A semicolon on page 3 has been upgraded to a full colon. The committee celebrates. Gerald weeps openly. He has given this revision the best years of his life and he is not exaggerating.'
        },
        {
          title: 'INTER-OFFICE PNEUMATIC TUBE SERVICE — MAINTENANCE REPORT',
          body: 'Tube 7-C between Records and Licensing jammed again at 10:23 AM. Retrieved contents: one canister containing a requisition form, one canister containing what appears to be someone\'s lunch order from 1952, one marble (origin unknown). Technician notes: "The marble has been here longer than I have. I respect its tenure." Tube cleared. Marble returned to tube as a courtesy.'
        },
        {
          title: 'MUNICIPAL ARCHIVE — PATRON ACCESS LOG',
          body: 'Wednesday, 14 visitors. Twelve of them wanted birth certificates. One wanted to "look at something old." One wanted to know if we had "the internet." We do not. We have microfiche and a sense of purpose. The patron who wanted something old was shown the 1938 sewer easement maps. She stayed for four hours. She said it was the most peaceful afternoon she\'d had in years. We understand completely.'
        },
        {
          title: 'EQUIPMENT REQUISITION — RUBBER STAMP INVENTORY',
          body: 'Current inventory: 47 stamps (RECEIVED, DENIED, PENDING, REVIEWED, FILED, UNFILED, RE-FILED, LOST, FOUND, FOUND AGAIN, MISFILED, ADEQUATE, INADEQUATE, SEE ATTACHED, NO ATTACHMENT FOUND, REFER TO DEPT. 7, DEPT. 7 DISSOLVED 1983). Request for 3 new stamps: ACKNOWLEDGED BUT NOT UNDERSTOOD, EMOTIONALLY PROCESSED, and NOTED WITH MILD CONCERN. Budget: $14.50. Approved.'
        }
      ],
      currentDoc: {},
      microTimer: null,

      // Form 38-B
      formData: { name: '', purpose: '', copies: '', stampColor: '', remarks: '' },
      formProcessing: false,
      formProgress: 0,
      formDone: false,
      receiptNumber: '',

      // Affidavit
      affKeywords: ['', '', ''],
      affidavitVisible: false,
      affidavitText: '',
      affidavitDate: '',

      init: function() {
        this.currentDoc = this.docs[0];
        this.startMicrofiche();
        this.animateCanister();
      },

      startMicrofiche: function() {
        var self = this;
        this.microTimer = setInterval(function() {
          self.advanceMicrofiche();
        }, 8000);
      },

      advanceMicrofiche: function() {
        var self = this;
        var textEl = document.getElementById('microfiche-text');
        var scanEl = document.getElementById('scanlines');

        // Flicker animation
        gsap.fromTo(scanEl, { opacity: 0 }, { opacity: 0.7, duration: 0.1, yoyo: true, repeat: 3 });
        gsap.fromTo(textEl, { opacity: 1, x: 0 }, {
          opacity: 0, x: -20, duration: 0.2, ease: 'power2.in',
          onComplete: function() {
            self.docIndex = (self.docIndex + 1) % self.docs.length;
            self.currentDoc = self.docs[self.docIndex];
            gsap.fromTo(textEl, { opacity: 0, x: 20 }, { opacity: 1, x: 0, duration: 0.3, ease: 'power2.out' });
          }
        });
      },

      submitForm: function() {
        if (this.formProcessing || this.formDone) return;
        this.formProcessing = true;
        this.formProgress = 0;

        var self = this;
        var startTime = Date.now();
        var duration = 12000;

        function tick() {
          var elapsed = Date.now() - startTime;
          var pct = Math.min((elapsed / duration) * 100, 100);
          // Make it agonizingly non-linear
          self.formProgress = Math.pow(pct / 100, 1.8) * 100;

          if (elapsed < duration) {
            requestAnimationFrame(tick);
          } else {
            self.formProgress = 100;
            self.formProcessing = false;
            self.formDone = true;
            self.receiptNumber = self.generateReceiptNumber();
            self.slamStamp();
          }
        }
        requestAnimationFrame(tick);
      },

      slamStamp: function() {
        var stampEl = document.getElementById('received-stamp');
        var angle = -3 + Math.random() * 6; // -3 to +3 degrees

        gsap.fromTo(stampEl,
          { opacity: 0, y: -200, rotation: angle - 10, scale: 1.3 },
          {
            opacity: 1, y: 0, rotation: angle, scale: 1,
            duration: 0.6, ease: 'bounce.out'
          }
        );
      },

      generateReceiptNumber: function() {
        var chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
        var result = '';
        for (var i = 0; i < 12; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result.substring(0,4) + '-' + result.substring(4,8) + '-' + result.substring(8,12);
      },

      generateAffidavit: function() {
        var k1 = this.affKeywords[0] || 'paperwork';
        var k2 = this.affKeywords[1] || 'patience';
        var k3 = this.affKeywords[2] || 'microfiche';

        var openings = [
          'WHEREAS the undersigned party, being of sound mind and questionable judgment, does hereby affirm under no particular oath that the matter of <strong>' + k1 + '</strong> has been duly considered, reviewed, and found to be neither urgent nor unimportant;',
          'KNOW ALL PERSONS BY THESE PRESENTS, or at least those persons who have read this far, that the concept of <strong>' + k1 + '</strong> has been entered into the record with all the ceremony such a concept deserves, which is to say: some;',
          'COMES NOW the affiant, Agnes Plumtree, sole proprietor and chief stamp operator, to state for the record that <strong>' + k1 + '</strong> has been formally acknowledged by this office on this date and no earlier, regardless of when it should have been;'
        ];

        var middles = [
          '<p>AND WHEREAS the intersection of <strong>' + k2 + '</strong> and prevailing municipal sentiment has produced a condition hereinafter referred to as "The Situation," it is the position of this office that The Situation requires no fewer than three (3) forms, two (2) signatures, and one (1) prolonged sigh before any action, inaction, or partial action may be taken or not taken.</p>',
          '<p>FURTHERMORE, let it be noted that <strong>' + k2 + '</strong>, as defined in Appendix Q of the Plumtree Municipal Handbook (unpublished, 1953 edition, coffee-stained), constitutes a matter of sufficient gravity to warrant the filing of this document, which itself constitutes a matter of insufficient gravity to warrant anything at all.</p>',
          '<p>IT IS FURTHER STIPULATED that <strong>' + k2 + '</strong> shall be understood in the broadest possible sense, encompassing but not limited to: the thing itself, the idea of the thing, the memory of having once thought about the thing, and the vague unease that accompanies all three.</p>'
        ];

        var closings = [
          '<p>HEREINAFTER, all references to <strong>' + k3 + '</strong> shall be interpreted as binding in spirit but not in law, in feeling but not in fact, and in the way that anything said at 3 AM feels true until approximately 7:15 AM. This affidavit is sealed with wax, filed without urgency, and offered to the universe with the full expectation that the universe will not write back.</p>',
          '<p>IN WITNESS WHEREOF, the affiant has affixed her seal and affirms that <strong>' + k3 + '</strong> has been duly processed through channels that do not exist, reviewed by a committee that has not convened since 1987, and stamped with ink that was purchased at full price from a stationery store that deserved the business.</p>',
          '<p>THEREFORE, in the matter of <strong>' + k3 + '</strong>, let it be resolved that this document exists, that it says something, and that the something it says is exactly as important as everything else filed in Suite 38-B, which is to say: profoundly important to exactly one person, and that person is Agnes Plumtree, and she is fine with that.</p>'
        ];

        var o = openings[Math.floor(Math.random() * openings.length)];
        var m = middles[Math.floor(Math.random() * middles.length)];
        var c = closings[Math.floor(Math.random() * closings.length)];

        this.affidavitText = '<p>' + o + '</p>' + m + c;

        var now = new Date();
        var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        this.affidavitDate = 'Executed on this ' + now.getDate() + this.ordinalSuffix(now.getDate()) + ' day of ' + months[now.getMonth()] + ', ' + now.getFullYear() + ', at an hour that felt later than it was.';

        this.affidavitVisible = true;
      },

      ordinalSuffix: function(n) {
        var s = ['th','st','nd','rd'];
        var v = n % 100;
        return s[(v - 20) % 10] || s[v] || s[0];
      },

      animateCanister: function() {
        var canister = document.getElementById('canister');
        if (!canister) return;

        var tl = gsap.timeline({ repeat: -1 });
        tl.fromTo(canister,
          { attr: { transform: 'translate(20, 30)' } },
          { attr: { transform: 'translate(290, 30)' }, duration: 2.5, ease: 'power1.inOut' }
        );
        tl.to(canister, {
          attr: { transform: 'translate(290, 30)' },
          duration: 0.8,
          ease: 'none'
        });
        // Scale pulse at station
        tl.fromTo(canister, { scale: 1 }, { scale: 1.15, duration: 0.15, yoyo: true, repeat: 1, transformOrigin: '50% 50%' }, '<');
        tl.fromTo(canister,
          { attr: { transform: 'translate(290, 30)' } },
          { attr: { transform: 'translate(580, 30)' }, duration: 2.5, ease: 'power1.inOut' }
        );
        tl.fromTo(canister,
          { attr: { transform: 'translate(580, 30)' } },
          { attr: { transform: 'translate(580, 30)' }, duration: 0.3 }
        );
        // Reset off screen
        tl.set(canister, { attr: { transform: 'translate(-20, 30)' } });
        tl.fromTo(canister,
          { attr: { transform: 'translate(-20, 30)' } },
          { attr: { transform: 'translate(20, 30)' }, duration: 0.3 }
        );
      }
    };
  });
});
</script>

</body>
</html>
