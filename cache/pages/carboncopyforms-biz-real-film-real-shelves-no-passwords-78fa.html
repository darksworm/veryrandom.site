<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CarbonCopyForms.biz — Real Film. Real Shelves. No Passwords.</title>
<link rel="stylesheet" href="/assets/css/fonts.css">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #E8E5D2;
  --text: #2B2A27;
  --accent: #6F00FF;
  --card-bg: #D4D1BB;
  --alert: #C0392B;
  --muted: #7A7867;
  --gutter: 60px;
  --border: 2px solid #2B2A27;
}

html { scroll-behavior: smooth; }

body {
  font-family: 'Fira Code', monospace;
  font-size: 16px;
  line-height: 1.6;
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
}

h1, h2, h3, h4 {
  font-family: 'Oswald', sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  line-height: 1.2;
}

.caveat {
  font-family: 'Caveat', cursive;
}

.page-wrap {
  max-width: 960px;
  margin: 0 auto;
  padding: 0 16px;
}

/* LINE-NUMBERED SECTION LAYOUT */
.numbered-section {
  display: grid;
  grid-template-columns: var(--gutter) 1fr;
  border: var(--border);
  border-bottom: none;
  position: relative;
}

.numbered-section:last-of-type {
  border-bottom: var(--border);
}

.line-num {
  font-family: 'Fira Code', monospace;
  font-size: 12px;
  color: var(--muted);
  text-align: right;
  padding: 16px 8px 0 0;
  border-right: var(--border);
  user-select: none;
}

.section-content {
  padding: 24px 24px 28px;
}

/* HERO */
.hero-logo {
  font-family: 'Oswald', sans-serif;
  font-size: clamp(28px, 6vw, 52px);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text);
  margin-bottom: 8px;
}

.hero-logo span {
  color: var(--accent);
}

.tagline-wrap {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0;
  margin-bottom: 16px;
}

.tagline {
  font-family: 'Oswald', sans-serif;
  font-size: clamp(16px, 3vw, 22px);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text);
}

.cursor-blink {
  display: inline-block;
  width: 14px;
  height: clamp(18px, 3vw, 24px);
  background: var(--accent);
  margin-left: 4px;
  animation: blink 1s step-end infinite;
  vertical-align: middle;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.hero-note {
  font-family: 'Caveat', cursive;
  font-size: 22px;
  color: var(--muted);
  margin-bottom: 20px;
  transform: rotate(-0.8deg);
}

.btn-preserve {
  display: inline-block;
  font-family: 'Oswald', sans-serif;
  font-size: 18px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  background: var(--accent);
  color: #FFFFFF;
  border: none;
  padding: 14px 32px;
  cursor: pointer;
  transition: background 0.2s;
  text-decoration: none;
  min-height: 48px;
}

.btn-preserve:hover {
  background: #5800CC;
}

/* CASE AGAINST DIGITAL */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
  font-size: 14px;
}

.comparison-table th {
  font-family: 'Oswald', sans-serif;
  font-size: 18px;
  text-transform: uppercase;
  padding: 12px 10px;
  border: var(--border);
  background: var(--card-bg);
  text-align: left;
}

.comparison-table th.their-cloud {
  color: var(--alert);
}

.comparison-table th.our-basement {
  color: var(--accent);
}

.comparison-table td {
  padding: 8px 10px;
  border: var(--border);
  vertical-align: top;
}

.dead {
  text-decoration: line-through;
  color: var(--muted);
}

.alive {
  color: var(--text);
  font-weight: 700;
}

.checkmark {
  color: var(--accent);
  font-weight: 700;
}

.days-counter {
  font-family: 'Oswald', sans-serif;
  font-size: clamp(28px, 5vw, 42px);
  text-align: center;
  color: var(--accent);
  padding: 16px 0;
}

.days-counter small {
  display: block;
  font-family: 'Fira Code', monospace;
  font-size: 14px;
  color: var(--muted);
  text-transform: none;
}

/* HOW IT WORKS */
.steps-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
}

.step-box {
  border: var(--border);
  padding: 20px 16px;
  text-align: center;
  background: var(--card-bg);
}

.step-box + .step-box {
  border-left: none;
}

.step-num {
  font-family: 'Oswald', sans-serif;
  font-size: 48px;
  color: var(--accent);
  line-height: 1;
  margin-bottom: 8px;
}

.step-icon {
  color: var(--accent);
  margin-bottom: 12px;
}

.step-box p {
  font-size: 14px;
  line-height: 1.5;
}

/* PRICING */
.tiers-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
}

.tier {
  border: var(--border);
  padding: 20px 16px;
  background: var(--card-bg);
  position: relative;
}

.tier + .tier {
  border-left: none;
}

.tier.popular {
  background: var(--bg);
  border-color: var(--accent);
  border-width: 3px;
}

.tier-badge {
  font-family: 'Oswald', sans-serif;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  background: var(--accent);
  color: #FFFFFF;
  padding: 4px 12px;
  display: inline-block;
  margin-bottom: 12px;
}

.tier h3 {
  font-size: clamp(18px, 2.5vw, 22px);
  margin-bottom: 8px;
}

.tier-price {
  font-family: 'Oswald', sans-serif;
  font-size: 32px;
  color: var(--accent);
  margin-bottom: 4px;
}

.tier-price small {
  font-size: 14px;
  color: var(--muted);
}

.tier ul {
  list-style: none;
  padding: 0;
  margin: 16px 0 0;
  font-size: 13px;
}

.tier ul li {
  padding: 6px 0;
  border-bottom: 1px solid #B5B2A0;
}

.tier ul li::before {
  content: "▪ ";
  color: var(--accent);
}

/* HAIKU GENERATOR */
.haiku-input {
  width: 100%;
  min-height: 100px;
  font-family: 'Fira Code', monospace;
  font-size: 14px;
  padding: 12px;
  border: var(--border);
  background: #FFFFFF;
  color: var(--text);
  resize: vertical;
}

.btn-haiku {
  display: inline-block;
  font-family: 'Oswald', sans-serif;
  font-size: 16px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  background: var(--text);
  color: var(--bg);
  border: none;
  padding: 12px 24px;
  cursor: pointer;
  margin-top: 12px;
  min-height: 48px;
}

.btn-haiku:hover {
  background: var(--accent);
  color: #FFFFFF;
}

.haiku-card {
  background: #FFF8E7;
  border: 1px solid #C9C3A8;
  padding: 28px 24px;
  margin-top: 20px;
  position: relative;
  transform-origin: center top;
  opacity: 0;
  max-width: 400px;
}

.haiku-card.visible {
  opacity: 1;
}

.haiku-card::before,
.haiku-card .ruled-line {
  content: "";
  display: block;
  width: 100%;
  height: 1px;
  background: #D4CBAF;
  margin: 14px 0;
}

.haiku-text {
  font-family: 'Caveat', cursive;
  font-size: 26px;
  color: var(--text);
  line-height: 1.8;
  text-align: center;
}

.haiku-footer {
  font-size: 13px;
  color: var(--muted);
  margin-top: 16px;
  text-align: center;
  font-style: italic;
}

/* LOST & FOUND */
.lf-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.lf-table th {
  font-family: 'Oswald', sans-serif;
  text-transform: uppercase;
  font-size: 14px;
  padding: 10px 8px;
  border: var(--border);
  background: var(--card-bg);
  text-align: left;
}

.lf-table td {
  padding: 10px 8px;
  border: var(--border);
  cursor: pointer;
  vertical-align: top;
}

.lf-table tr.lf-row:hover td {
  background: var(--card-bg);
}

.lf-table tr.motm td {
  border-left: 4px solid var(--accent);
}

.motm-badge {
  font-family: 'Oswald', sans-serif;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  background: var(--accent);
  color: #FFFFFF;
  padding: 2px 6px;
  margin-left: 6px;
  vertical-align: middle;
}

.lf-detail {
  display: none;
  font-size: 13px;
  line-height: 1.6;
  color: var(--text);
}

.lf-detail.open {
  display: table-row;
}

.lf-detail td {
  padding: 16px 12px;
  background: #FFF8E7;
  cursor: default;
  font-family: 'Fira Code', monospace;
}

/* FOOTER */
.footer-section .section-content {
  text-align: center;
}

.printer-anim {
  font-family: 'Fira Code', monospace;
  font-size: 12px;
  color: var(--muted);
  height: 80px;
  overflow: hidden;
  margin-bottom: 16px;
  line-height: 1.6;
  white-space: pre;
}

.footer-info {
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 12px;
}

.vent-link {
  color: var(--accent);
  text-decoration: underline;
  cursor: pointer;
  font-size: 13px;
  background: none;
  border: none;
  font-family: 'Fira Code', monospace;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
}

.vent-link:hover {
  color: #5800CC;
}

.footer-caveat {
  font-family: 'Caveat', cursive;
  font-size: 24px;
  color: var(--text);
  margin-top: 20px;
  transform: rotate(-0.5deg);
}

/* MODAL */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(43, 42, 39, 0.7);
  z-index: 9000;
  align-items: center;
  justify-content: center;
}

.modal-overlay.open {
  display: flex;
}

.modal-box {
  background: var(--bg);
  border: var(--border);
  max-width: 520px;
  width: 90%;
  padding: 32px 28px;
  position: relative;
}

.modal-box h3 {
  font-size: 22px;
  margin-bottom: 16px;
  border-bottom: var(--border);
  padding-bottom: 12px;
}

.modal-stamp {
  position: absolute;
  top: 40px;
  right: 20px;
  font-family: 'Oswald', sans-serif;
  font-size: 36px;
  color: var(--accent);
  transform: rotate(12deg);
  border: 4px solid var(--accent);
  padding: 4px 14px;
  letter-spacing: 0.1em;
}

.modal-box p {
  font-size: 14px;
  margin-bottom: 10px;
}

.btn-close-file {
  font-family: 'Oswald', sans-serif;
  font-size: 16px;
  text-transform: uppercase;
  background: var(--text);
  color: var(--bg);
  border: none;
  padding: 12px 24px;
  cursor: pointer;
  margin-top: 16px;
  min-height: 48px;
}

.btn-close-file:hover {
  background: var(--accent);
  color: #FFFFFF;
}

/* FADE IN ON SCROLL */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
}

/* RESPONSIVE */
@media (max-width: 768px) {
  :root { --gutter: 40px; }

  .steps-grid {
    grid-template-columns: 1fr;
  }

  .step-box + .step-box {
    border-left: var(--border);
    border-top: none;
  }

  .tiers-grid {
    grid-template-columns: 1fr;
  }

  .tier + .tier {
    border-left: var(--border);
    border-top: none;
  }

  .comparison-table {
    font-size: 12px;
  }

  .lf-table {
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  :root { --gutter: 32px; }

  .line-num {
    font-size: 10px;
    padding: 12px 4px 0 0;
  }

  .section-content {
    padding: 16px 12px 20px;
  }

  .hero-logo {
    font-size: 24px;
  }

  .comparison-table th, .comparison-table td {
    padding: 6px 4px;
  }

  .lf-table th, .lf-table td {
    padding: 6px 4px;
    font-size: 11px;
  }

  .lf-table .col-status {
    display: none;
  }
}
</style>
</head>
<body>

<div class="page-wrap" x-data="carboncopy()" x-init="">

  <!-- HERO -->
  <div class="numbered-section fade-in">
    <div class="line-num">001<br>002<br>003<br>004<br>005</div>
    <div class="section-content">
      <div class="hero-logo">Carbon<span>Copy</span>Forms<span>.biz</span></div>
      <div class="tagline-wrap">
        <span class="tagline">Real Film. Real Shelves. No Passwords.</span>
        <span class="cursor-blink"></span>
      </div>
      <p class="hero-note caveat">Founded 2014 by Dale &amp; Mary Funnigan. Still operational. Still underground.</p>
      <button class="btn-preserve" onclick="document.getElementById('how-it-works').scrollIntoView({behavior:'smooth'})">PRESERVE YOUR DOCUMENTS</button>
    </div>
  </div>

  <!-- THE CASE AGAINST DIGITAL -->
  <div class="numbered-section fade-in">
    <div class="line-num">006<br>007<br>008<br>009<br>010<br>011<br>012<br>013<br>014</div>
    <div class="section-content">
      <h2 style="margin-bottom:16px;">The Case Against Digital</h2>
      <table class="comparison-table">
        <thead>
          <tr>
            <th class="their-cloud">Their Cloud</th>
            <th class="our-basement">Our Basement</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><span class="dead">MegaUpload (2012) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2012 — Still on film.</span></td></tr>
          <tr><td><span class="dead">Google Reader (2013) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2013 — Still on film.</span></td></tr>
          <tr><td><span class="dead">Bitcasa (2014) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2014 — Still on film.</span></td></tr>
          <tr><td><span class="dead">Copy.com (2016) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2016 — Still on film.</span></td></tr>
          <tr><td><span class="dead">Samsung Cloud (2021) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2021 — Still on film.</span></td></tr>
          <tr><td><span class="dead">Google Stadia (2023) — DEFUNCT</span></td><td><span class="checkmark">✓</span> <span class="alive">2023 — Still on film.</span></td></tr>
        </tbody>
      </table>
      <div class="days-counter">
        <span x-text="daysSince"></span> DAYS
        <small>of continuous preservation since January 1, 2014</small>
      </div>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <div class="numbered-section fade-in" id="how-it-works">
    <div class="line-num">015<br>016<br>017<br>018<br>019<br>020</div>
    <div class="section-content">
      <h2 style="margin-bottom:16px;">How It Works</h2>
      <div class="steps-grid">
        <div class="step-box">
          <div class="step-num">1</div>
          <div class="step-icon"><i data-lucide="upload" style="width:32px;height:32px;"></i></div>
          <p><strong>Upload any document.</strong> Tax forms. Love letters. Receipts for things you shouldn't have bought. We don't judge.</p>
        </div>
        <div class="step-box">
          <div class="step-num">2</div>
          <div class="step-icon"><i data-lucide="film" style="width:32px;height:32px;"></i></div>
          <p><strong>We print it to archival microfiche</strong> in a climate-controlled government surplus basement outside Wichita, KS. Humidity: 42%. Always.</p>
        </div>
        <div class="step-box">
          <div class="step-num">3</div>
          <div class="step-icon"><i data-lucide="moon" style="width:32px;height:32px;"></i></div>
          <p><strong>Sleep well.</strong> Your proof of existence is safe. No server farms. No password resets. Just film, shelves, and Dale.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- SERVICE TIERS -->
  <div class="numbered-section fade-in">
    <div class="line-num">021<br>022<br>023<br>024<br>025<br>026<br>027<br>028<br>029</div>
    <div class="section-content">
      <h2 style="margin-bottom:16px;">Service Tiers</h2>
      <div class="tiers-grid">
        <div class="tier">
          <h3>Standard Archive</h3>
          <div class="tier-price">$4.99 <small>/document</small></div>
          <ul>
            <li>Printed to 35mm archival microfiche</li>
            <li>Stored in Aisle 7, Shelf B or higher</li>
            <li>Annual "Your File Still Exists" postcard</li>
            <li>Indexed by hand (Dale's handwriting)</li>
          </ul>
        </div>
        <div class="tier popular">
          <div class="tier-badge">MOST POPULAR</div>
          <h3>Carbonite Club</h3>
          <div class="tier-price">$12.99 <small>/month</small></div>
          <ul>
            <li>Unlimited document archival</li>
            <li>Priority vent placement (closer to HVAC #3)</li>
            <li>Laminated certificate of preservation</li>
            <li>Monthly digest: "What We Filed This Month"</li>
            <li>First access during tornado season retrieval</li>
          </ul>
        </div>
        <div class="tier">
          <h3>Documentarian's Cut</h3>
          <div class="tier-price">$34.99 <small>/document</small></div>
          <ul>
            <li>Everything in Standard Archive</li>
            <li>A real human reads your document aloud on tape</li>
            <li>Dramatic pauses included at no extra charge</li>
            <li>Audio cassette mailed to address on file</li>
            <li>Ideal for wills, manifestos, resignation letters</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- BUREAUCRATIC HAIKU GENERATOR -->
  <div class="numbered-section fade-in">
    <div class="line-num">030<br>031<br>032<br>033<br>034<br>035<br>036</div>
    <div class="section-content">
      <h2 style="margin-bottom:16px;">Bureaucratic Haiku Generator</h2>
      <p style="font-size:14px;margin-bottom:12px;color:var(--muted);">Paste any text. We compress it into 17 syllables of bureaucratic poetry.</p>
      <textarea class="haiku-input" placeholder="Paste your document text here. Contracts, complaints, grocery lists — all valid." x-model="haikuInput"></textarea>
      <button class="btn-haiku" x-on:click="generateHaiku()">GENERATE HAIKU</button>
      <div class="haiku-card" x-ref="haikuCard" x-show="haikuOutput.length > 0">
        <div class="haiku-text">
          <template x-for="(line, i) in haikuOutput" :key="i">
            <div>
              <span x-text="line"></span>
              <div class="ruled-line" x-show="i < haikuOutput.length - 1" style="margin:6px auto;width:60%;"></div>
            </div>
          </template>
        </div>
        <p class="haiku-footer">Your words. Compressed. Preserved in 17 syllables.</p>
      </div>
    </div>
  </div>

  <!-- LOST & FOUND -->
  <div class="numbered-section fade-in">
    <div class="line-num">037<br>038<br>039<br>040<br>041<br>042<br>043<br>044<br>045<br>046</div>
    <div class="section-content">
      <h2 style="margin-bottom:16px;">Lost &amp; Found</h2>
      <p style="font-size:14px;margin-bottom:12px;color:var(--muted);">Misfiled documents currently awaiting claim. Click any row for our analysis.</p>
      <table class="lf-table">
        <thead>
          <tr>
            <th>ID#</th>
            <th>Description</th>
            <th>Date Filed</th>
            <th class="col-status">Status</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="(item, index) in lostFound" :key="item.id">
            <tr style="display:contents;">
              <tr class="lf-row" :class="{'motm': item.motm}" x-on:click="toggleLF(index)" style="cursor:pointer;">
                <td x-text="item.id"></td>
                <td><span x-text="item.desc"></span><span class="motm-badge" x-show="item.motm">MICROFICHE OF THE MONTH</span></td>
                <td x-text="item.date"></td>
                <td class="col-status" x-text="item.status"></td>
              </tr>
              <tr class="lf-detail" :class="{'open': openLF === index}">
                <td colspan="4" x-text="item.detail"></td>
              </tr>
            </tr>
          </template>
        </tbody>
      </table>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="numbered-section footer-section fade-in">
    <div class="line-num">047<br>048<br>049<br>050<br>051</div>
    <div class="section-content">
      <div class="printer-anim" x-ref="printer"></div>
      <p class="footer-info">CarbonCopyForms.biz — Wichita, KS — Est. 2014</p>
      <button class="vent-link" x-on:click="ventModalOpen = true">[ Ventilation Report ]</button>
      <p class="footer-caveat caveat">Some things deserve to be held onto.</p>
    </div>
  </div>

  <!-- VENTILATION REPORT MODAL -->
  <div class="modal-overlay" :class="{'open': ventModalOpen}" x-on:click.self="ventModalOpen = false">
    <div class="modal-box">
      <div class="modal-stamp">NOMINAL</div>
      <h3>Ventilation Report — HVAC Unit #3</h3>
      <p><strong>Location:</strong> Sub-basement B, East Corridor, behind Shelf 14-K</p>
      <p><strong>Unit Make/Model:</strong> Carrier WeatherMaster 48HC, circa 2003</p>
      <p><strong>Status:</strong> NOMINAL</p>
      <p><strong>Last Inspected:</strong> 09/14/2017</p>
      <p><strong>Next Scheduled Maintenance:</strong> PENDING</p>
      <p><strong>Notes:</strong> Unit produces a faint hum at 3:00 AM on Tuesdays. Unrelated to document preservation. Probably.</p>
      <p style="margin-top:16px;font-family:'Caveat',cursive;font-size:20px;color:var(--muted);">— Dale checked this personally. It's fine.</p>
      <button class="btn-close-file" x-on:click="ventModalOpen = false">CLOSE FILE</button>
    </div>
  </div>

</div>

<script src="/assets/js/gsap.min.js"></script>
<script src="/assets/js/alpine.min.js" defer></script>
<script src="/assets/js/lucide.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
});

// Syllable counter (approximation)
function countSyllables(word) {
  word = word.toLowerCase().replace(/[^a-z]/g, '');
  if (!word) return 0;
  if (word.length <= 2) return 1;
  var syl = 0;
  var vowels = 'aeiouy';
  var prev = false;
  for (var i = 0; i < word.length; i++) {
    var isV = vowels.indexOf(word[i]) >= 0;
    if (isV && !prev) syl++;
    prev = isV;
  }
  if (word.endsWith('e') && syl > 1) syl--;
  if (word.endsWith('le') && word.length > 2 && vowels.indexOf(word[word.length - 3]) < 0) syl++;
  return Math.max(1, syl);
}

function buildHaikuLine(words, targetSyl) {
  var line = [];
  var count = 0;
  while (words.length > 0 && count < targetSyl) {
    var w = words[0];
    var s = countSyllables(w);
    if (count + s <= targetSyl) {
      line.push(words.shift());
      count += s;
    } else {
      break;
    }
  }
  if (line.length === 0 && words.length > 0) {
    line.push(words.shift());
  }
  return line.join(' ');
}

// Printer animation lines
var printerLines = [
  '>>>  CARBONCOPYFORMS.BIZ  <<<',
  '================================',
  'STATUS: OPERATIONAL',
  'MICROFICHE QUEUE: 14 PENDING',
  'HVAC #3: NOMINAL',
  'SHELF CAPACITY: 73.2%',
  'DALE: PRESENT',
  'MARY: OUT (LUNCH)',
  '================================',
  '>>>  END TRANSMISSION  <<<',
  '',
  '>>>  CARBONCOPYFORMS.BIZ  <<<',
];

function startPrinter(el) {
  if (!el) return;
  var idx = 0;
  var displayed = [];
  var maxLines = 5;

  function printNext() {
    displayed.push(printerLines[idx % printerLines.length]);
    if (displayed.length > maxLines) displayed.shift();
    el.textContent = displayed.join('\n');
    idx++;
  }

  printNext();
  setInterval(printNext, 1800);
}

// GSAP scroll fade-in
function initScrollAnimations() {
  var sections = document.querySelectorAll('.fade-in');
  sections.forEach(function(section) {
    gsap.fromTo(section, 
      { opacity: 0, y: 20 },
      {
        opacity: 1,
        y: 0,
        duration: 0.6,
        ease: 'power2.out',
        scrollTrigger: null,
        paused: true,
      }
    );
  });

  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        gsap.fromTo(entry.target, 
          { opacity: 0, y: 20 },
          { opacity: 1, y: 0, duration: 0.6, ease: 'power2.out' }
        );
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  sections.forEach(function(s) { observer.observe(s); });
}

document.addEventListener('DOMContentLoaded', function() {
  if (typeof gsap !== 'undefined') {
    initScrollAnimations();
  }
});

// Alpine component
document.addEventListener('alpine:init', function() {
  Alpine.data('carboncopy', function() {
    return {
      daysSince: 0,
      haikuInput: '',
      haikuOutput: [],
      openLF: -1,
      ventModalOpen: false,
      lostFound: [
        { id: 'BF-0041', desc: 'Blue Form, Slightly Crinkled', date: '03/12/2017', status: 'UNCLAIMED', motm: false, detail: 'Standard issue blue form, origin unknown. Bears the watermark of a defunct Kansas municipal office. Crinkle pattern suggests it was balled up and then smoothed out by someone who changed their mind. We respect that.' },
        { id: 'INV-0887', desc: 'Invoice with Coffee Stain, Possibly Pertaining to Cats', date: '11/02/2018', status: 'PENDING REVIEW', motm: false, detail: 'Partial invoice from "Whiskers & Co." for an undisclosed quantity of something billed at $7.40 per unit. The coffee stain obscures the item description. Could be cat food. Could be tiny sweaters. The truth is somewhere under the French Roast.' },
        { id: 'RX-2201', desc: 'Prescription for "Confidence" (Not a Real Drug)', date: '06/18/2019', status: 'FILED', motm: true, detail: 'Hand-written on a prescription pad. Reads: "Confidence, 200mg, take daily." Signed by a Dr. who we cannot verify exists. Filed under Inspirational Documents, Sub-category: Questionable Medical Advice. This month\'s featured microfiche.' },
        { id: 'LTR-0553', desc: 'Unsent Letter to a High School Principal', date: '01/09/2016', status: 'UNCLAIMED', motm: false, detail: 'Three pages, handwritten, addressing a "Mr. Brannigan." Begins with "I\'ve been meaning to say this for twenty years." Never sent. The envelope was sealed, opened, re-sealed with tape, then opened again. We preserved all iterations.' },
        { id: 'TAX-7741', desc: '1099 for $14.23 from Unknown Source', date: '04/15/2020', status: 'DISPUTED', motm: false, detail: 'Someone, somewhere, paid this person $14.23 and reported it to the IRS. The payer field reads "MSCLLNS SVCS." The recipient has filed three disputes. We have archived all three disputes. The $14.23 remains unexplained.' },
        { id: 'MAP-0012', desc: 'Hand-Drawn Map of a Basement That May Be This Basement', date: '08/30/2015', status: 'UNDER STUDY', motm: false, detail: 'Pencil on graph paper. Scale approximately 1:200. Depicts a basement with labeled shelves, a circled area marked "DO NOT OPEN," and what appears to be an arrow pointing to HVAC Unit #3. We are investigating whether this depicts our facility. Findings inconclusive.' },
        { id: 'RCP-3390', desc: 'Receipt for 47 Identical Staplers', date: '02/22/2021', status: 'ARCHIVED', motm: false, detail: 'Office Depot receipt. 47x Swingline 747, black. Subtotal: $611.53. No rewards card used. No loyalty points claimed. Just a person who needed forty-seven staplers on a Tuesday in February. We do not ask why. We archive.' },
      ],

      init: function() {
        var self = this;
        this.updateDays();
        setInterval(function() { self.updateDays(); }, 60000);

        this.$nextTick(function() {
          startPrinter(self.$refs.printer);
        });
      },

      updateDays: function() {
        var start = new Date(2014, 0, 1);
        var now = new Date();
        this.daysSince = Math.floor((now - start) / 86400000).toLocaleString();
      },

      generateHaiku: function() {
        var self = this;
        var text = this.haikuInput.trim();
        if (!text) {
          this.haikuOutput = ['No words given', 'The void stares back at you now', 'File something, please'];
          this.animateCard();
          return;
        }

        var words = text.replace(/[^a-zA-Z\s]/g, ' ').split(/\s+/).filter(function(w) { return w.length > 0; });
        if (words.length < 3) {
          words = words.concat(['forms', 'filed', 'preserved', 'basement', 'microfiche', 'wichita', 'dale', 'shelves']);
        }

        // Shuffle
        for (var i = words.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var tmp = words[i]; words[i] = words[j]; words[j] = tmp;
        }

        var pool = words.slice();
        var line1 = buildHaikuLine(pool, 5);
        if (pool.length === 0) pool = words.slice();
        var line2 = buildHaikuLine(pool, 7);
        if (pool.length === 0) pool = words.slice();
        var line3 = buildHaikuLine(pool, 5);

        this.haikuOutput = [line1, line2, line3];
        this.animateCard();
      },

      animateCard: function() {
        var card = this.$refs.haikuCard;
        if (!card) return;
        card.classList.add('visible');
        if (typeof gsap !== 'undefined') {
          gsap.fromTo(card,
            { opacity: 0, y: -40, rotation: -3, scale: 1.05 },
            { opacity: 1, y: 0, rotation: 0, scale: 1, duration: 0.4, ease: 'back.out(1.7)' }
          );
        } else {
          card.style.opacity = '1';
        }
      },

      toggleLF: function(index) {
        this.openLF = this.openLF === index ? -1 : index;
      }
    };
  });
});
</script>

</body>
</html>
