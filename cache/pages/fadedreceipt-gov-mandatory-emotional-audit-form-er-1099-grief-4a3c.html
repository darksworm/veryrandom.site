<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FadedReceipt.gov — Form ER-1099-GRIEF</title>
<link rel="stylesheet" href="/assets/css/fonts.css"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

/* --- Noise texture (inline SVG data URI) --- */
body{
  font-family:'IBM Plex Mono',monospace;
  background-color:#E8E4DC;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
  color:#2B3A42;
  min-height:100vh;
  line-height:1.55;
  font-size:14px;
  position:relative;
}

/* --- Torn edge at top --- */
body::before{
  content:'';
  display:block;
  width:100%;
  height:28px;
  background:#E8E4DC;
  position:relative;
  z-index:10;
  clip-path:polygon(
    0% 0%, 100% 0%,
    100% 40%, 98% 55%, 96% 42%, 94% 60%, 91% 45%, 88% 58%, 85% 40%, 82% 52%, 79% 38%,
    76% 55%, 73% 42%, 70% 60%, 67% 44%, 64% 56%, 61% 40%, 58% 53%, 55% 38%,
    52% 58%, 49% 42%, 46% 55%, 43% 40%, 40% 52%, 37% 38%, 34% 56%, 31% 44%,
    28% 60%, 25% 42%, 22% 55%, 19% 40%, 16% 52%, 13% 38%, 10% 55%, 7% 42%,
    4% 58%, 2% 45%, 0% 55%
  );
  animation:tear-pull 60s linear infinite;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}

@keyframes tear-pull{
  0%{transform:translateY(0)}
  100%{transform:translateY(8px)}
}

/* --- Main container --- */
.form-wrap{
  max-width:640px;
  margin:0 auto;
  padding:20px 24px 80px;
}

/* --- Seal --- */
.seal{
  text-align:center;
  margin:24px 0 32px;
}
.seal-circle{
  width:120px;height:120px;
  border:2px solid #2B3A42;
  border-radius:50%;
  margin:0 auto 12px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.seal-circle::before{
  content:'';
  display:block;
  width:36px;height:48px;
  border:2px solid #6A9BA2;
  border-radius:2px;
  position:relative;
}
.seal-circle::after{
  content:'';
  position:absolute;
  width:20px;
  height:2px;
  background:#6A9BA2;
  box-shadow:0 6px 0 #6A9BA2, 0 12px 0 #6A9BA2, 0 18px 0 #6A9BA2;
  top:50%;left:50%;
  transform:translate(-50%,-30%);
}
.seal-dept{
  font-size:8px;
  letter-spacing:3px;
  text-transform:uppercase;
  color:#6A9BA2;
}
.seal-form{
  font-size:13px;
  font-weight:700;
  margin-top:4px;
}
.seal-sub{
  font-size:11px;
  color:#6A9BA2;
  margin-top:2px;
}

/* --- Section headers --- */
.section-hdr{
  background:#6A9BA2;
  color:#E8E4DC;
  padding:6px 10px;
  font-size:12px;
  font-weight:700;
  letter-spacing:1px;
  text-transform:uppercase;
  margin:28px 0 16px;
}

/* --- Fields --- */
.field{margin-bottom:18px}
.field label{
  display:block;
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:0.5px;
  margin-bottom:4px;
  color:#2B3A42;
}
.field input[type="text"],
.field textarea,
.field select{
  width:100%;
  font-family:'IBM Plex Mono',monospace;
  font-size:14px;
  padding:8px 10px;
  border:1px solid #2B3A42;
  background:#F5F2EB;
  color:#2B3A42;
  outline:none;
}
.field input:focus,.field textarea:focus,.field select:focus{
  border-color:#6A9BA2;
  box-shadow:0 0 0 2px rgba(106,155,162,0.2);
}
.field textarea{resize:vertical;min-height:100px}
.field select{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%232B3A42' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;padding-right:30px}
.field .hint{font-size:10px;color:#6A9BA2;margin-top:3px}

/* --- SSN dots --- */
.ssn-display{
  font-family:'IBM Plex Mono',monospace;
  font-size:16px;
  letter-spacing:3px;
  padding:8px 10px;
  border:1px solid #2B3A42;
  background:#F5F2EB;
  min-height:36px;
  display:flex;
  align-items:center;
}
.ssn-display .dot{
  display:inline-block;
  width:8px;height:8px;
  background:#2B3A42;
  border-radius:50%;
  margin-right:4px;
  opacity:0;
  transition:opacity 0.3s;
}
.ssn-display .dot.visible{opacity:1}
.ssn-display .sep{
  display:inline-block;
  margin:0 4px;
  color:#6A9BA2;
}
.ssn-noted{
  font-size:10px;
  color:#8B2E2E;
  margin-top:4px;
  opacity:0;
  transition:opacity 0.6s;
}
.ssn-noted.show{opacity:1}

/* --- File upload fake --- */
.fake-upload{
  border:2px dashed #2B3A42;
  padding:14px;
  text-align:center;
  cursor:pointer;
  font-size:12px;
  background:#F5F2EB;
  position:relative;
}
.fake-upload:hover .upload-tooltip{opacity:1}
.upload-tooltip{
  position:absolute;
  bottom:calc(100% + 6px);
  left:50%;transform:translateX(-50%);
  background:#2B3A42;color:#E8E4DC;
  padding:6px 10px;font-size:10px;
  white-space:nowrap;
  opacity:0;
  transition:opacity 0.2s;
  pointer-events:none;
}

/* --- Char counter --- */
.char-counter{
  font-size:11px;
  color:#6A9BA2;
  text-align:right;
  margin-top:2px;
}
.char-counter .warn{color:#C4A835}

/* --- Spinner --- */
.spinner-area{
  text-align:center;
  padding:24px 0;
  display:none;
}
.spinner-area.active{display:block}

.receipt-spinner{
  display:inline-block;
  width:40px;height:56px;
  border:2px solid #6A9BA2;
  border-radius:2px;
  position:relative;
  animation:spin-receipt 2s linear infinite;
}
.receipt-spinner::before{
  content:'';
  position:absolute;
  top:8px;left:6px;right:6px;
  height:2px;
  background:#6A9BA2;
  box-shadow:0 6px 0 #6A9BA2, 0 12px 0 #6A9BA2, 0 18px 0 rgba(106,155,162,0.5), 0 24px 0 rgba(106,155,162,0.3);
}
.receipt-spinner::after{
  content:'';
  position:absolute;
  bottom:0;left:0;right:0;
  height:6px;
  clip-path:polygon(0% 0%, 5% 80%, 12% 20%, 20% 90%, 28% 10%, 35% 70%, 42% 30%, 50% 85%, 58% 15%, 65% 75%, 72% 25%, 80% 90%, 88% 10%, 95% 80%, 100% 0%);
  background:#6A9BA2;
}

@keyframes spin-receipt{
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}

.spinner-label{
  font-size:11px;
  color:#6A9BA2;
  margin-top:8px;
}
.spinner-timer{
  font-size:12px;
  font-weight:700;
  margin-top:4px;
}
.progress-bar{
  width:200px;
  height:6px;
  background:#F5F2EB;
  border:1px solid #2B3A42;
  margin:8px auto 0;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  background:#6A9BA2;
  width:0%;
  transition:width 0.5s linear;
}

/* --- Result --- */
.result-box{
  border:2px solid #2B3A42;
  padding:14px;
  margin:16px 0;
  background:#F5F2EB;
  display:none;
  font-size:13px;
  line-height:1.6;
}
.result-box.active{display:block}
.result-box .penalty{color:#C4A835;font-weight:700}
.result-box .note{color:#8B2E2E;font-size:11px;margin-top:8px;display:block}

/* --- Certification --- */
.cert-row{
  display:flex;
  align-items:flex-start;
  gap:10px;
  margin:20px 0;
}
.cert-row input[type="checkbox"]{
  margin-top:3px;
  width:16px;height:16px;
  accent-color:#6A9BA2;
  cursor:pointer;
}
.cert-row label{
  font-size:12px;
  cursor:pointer;
  line-height:1.5;
}

/* --- Submit button (Win95 style) --- */
.submit-btn{
  display:none;
  font-family:'IBM Plex Mono',monospace;
  font-size:14px;
  font-weight:700;
  text-transform:uppercase;
  padding:8px 24px;
  background:#C0C0C0;
  border:2px outset #fff;
  border-right-color:#808080;
  border-bottom-color:#808080;
  color:#000;
  cursor:pointer;
  letter-spacing:1px;
}
.submit-btn:active{
  border:2px inset #808080;
  border-right-color:#fff;
  border-bottom-color:#fff;
}
.submit-btn.visible{display:inline-block}

.submit-msg{
  font-size:11px;
  color:#6A9BA2;
  margin-top:10px;
  opacity:0;
  transition:opacity 1s;
  line-height:1.6;
}
.submit-msg.show{opacity:1}

/* --- Lockout --- */
.lockout-banner{
  display:none;
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:#8B2E2E;
  z-index:10000;
  color:#E8E4DC;
  font-family:'IBM Plex Mono',monospace;
  padding:40px 24px;
  text-align:center;
  overflow-y:auto;
}
.lockout-banner.active{display:flex;flex-direction:column;align-items:center;justify-content:center}
.lockout-banner h2{
  font-size:16px;
  letter-spacing:1px;
  text-transform:uppercase;
  margin-bottom:16px;
  max-width:600px;
}
.lockout-banner p{
  font-size:13px;
  max-width:500px;
  line-height:1.6;
  margin-bottom:12px;
}
.lockout-banner .appeal-link{
  color:#C4A835;
  cursor:pointer;
  text-decoration:underline;
  font-size:12px;
  margin-top:20px;
}
.lockout-appeal{
  display:none;
  margin-top:16px;
  text-align:center;
}
.lockout-appeal.show{display:block}
.lockout-appeal label{
  font-size:11px;
  display:block;
  margin-bottom:6px;
}
.lockout-appeal input{
  font-family:'IBM Plex Mono',monospace;
  font-size:14px;
  padding:6px 10px;
  border:1px solid #E8E4DC;
  background:transparent;
  color:#E8E4DC;
  width:200px;
  text-align:center;
}

/* --- Footer --- */
.footer-personal{
  font-family:'Caveat',cursive;
  font-size:14px;
  color:rgba(43,58,66,0.4);
  margin-top:60px;
  line-height:1.6;
  text-align:center;
}
.footer-legal{
  font-size:9px;
  color:rgba(43,58,66,0.35);
  margin-top:20px;
  text-align:center;
  line-height:1.6;
  padding-bottom:40px;
}

/* --- Subtle fade animation on page submit --- */
.fading{
  transition:opacity 0.5s linear;
}

/* --- Filing status alternating bg --- */
.alt-bg{background-color:#F5F2EB;padding:16px;margin:-16px -24px;padding-left:24px;padding-right:24px}
</style>
</head>
<body>

<div class="form-wrap" id="formWrap" x-data="auditForm()">

  <!-- Seal -->
  <div class="seal">
    <div class="seal-circle"></div>
    <div class="seal-dept">DEPARTMENT OF EMOTIONAL REVENUE</div>
    <div class="seal-form">FORM ER-1099-GRIEF (Rev. March 2011)</div>
    <div class="seal-sub">For use by U.S. taxpayers who have experienced emotional responses to paper-based financial records dated 1978 or earlier.</div>
  </div>

  <!-- SECTION A -->
  <div class="section-hdr">Section A: Taxpayer Identification</div>

  <div class="field">
    <label for="fullname">Full Legal Name (as it appears on your most painful memory)</label>
    <input type="text" id="fullname" placeholder=""/>
  </div>

  <div class="field">
    <label>Social Security Number</label>
    <div class="ssn-display" id="ssnDisplay">
      <template x-for="i in 3"><span class="dot" :class="ssnCount > (i-1) && 'visible'"></span></template>
      <span class="sep">-</span>
      <template x-for="i in 2"><span class="dot" :class="ssnCount > (i+2) && 'visible'"></span></template>
      <span class="sep">-</span>
      <template x-for="i in 4"><span class="dot" :class="ssnCount > (i+4) && 'visible'"></span></template>
    </div>
    <input type="text" maxlength="9" inputmode="numeric" pattern="[0-9]*"
           style="position:absolute;opacity:0;pointer-events:none"
           id="ssnInput"
           @input="handleSsn($event)"/>
    <div class="ssn-noted" :class="ssnComplete && 'show'">Your identity has been noted. This is not a threat. This is what forms do.</div>
    <div class="hint" style="cursor:pointer" @click="$refs.ssnReal.focus();document.getElementById('ssnInput').focus()">Click to enter SSN</div>
    <input type="text" x-ref="ssnReal" style="position:absolute;opacity:0;height:0;width:0;pointer-events:none"/>
  </div>

  <div class="field">
    <label for="dob">Date of Birth</label>
    <input type="text" id="dob" placeholder="MM/DD/YYYY"/>
  </div>

  <div class="field">
    <label for="status">Current Emotional Filing Status</label>
    <select id="status">
      <option value="">— Select —</option>
      <option>Single (no co-filers on this grief)</option>
      <option>Married filing jointly (shared receipt discovery)</option>
      <option>Head of archive (sole custodian of deceased relative's papers)</option>
      <option>Qualifying widower with dependent memories</option>
    </select>
  </div>

  <!-- SECTION B -->
  <div class="section-hdr">Section B: Receipt Description</div>
  <div class="alt-bg">

    <div class="field">
      <label for="receiptDesc">Describe the receipt in question. Include merchant name, date, amount, and any coffee stains, folds, or evidence of having been used as a bookmark.</label>
      <textarea id="receiptDesc" @input="charCount = $event.target.value.length" rows="6"></textarea>
      <div class="char-counter">
        <span x-text="displayCount"></span> characters <span class="warn">— MINIMUM 2,000 CHARACTERS REQUIRED</span>
      </div>
    </div>

    <div class="field">
      <label>Attach Scanned Receipt (TIFF format only, max 1.4MB — floppy disk compatible)</label>
      <div class="fake-upload" @click="">
        <span class="upload-tooltip">Scanner driver not found. Please install HP DeskJet 500C drivers (Windows 3.1).</span>
        Choose File... <span style="color:#6A9BA2;margin-left:8px">No file selected</span>
      </div>
    </div>
  </div>

  <!-- SECTION C -->
  <div class="section-hdr">Section C: Emotional Declaration</div>

  <div class="field">
    <label for="emotion">Under penalty of perjury, I declare that upon discovering the above-described receipt, I experienced:</label>
    <select id="emotion" @change="handleEmotionSelect($event)">
      <option value="">— Select one emotion —</option>
      <option value="amusement">Fleeting amusement (non-taxable under IRC §1978.02)</option>
      <option value="regret">Overwhelming regret (5% surtax applies)</option>
      <option value="unclassifiable">A sadness I cannot name (see Schedule G — Unclassifiable Feelings)</option>
      <option value="conviction">The sudden conviction that time is a bureaucratic error</option>
      <option value="suspicious-joy">Joy, followed immediately by the suspicion that joy is fraudulent</option>
      <option value="nothing">Nothing (PENALTY: Emotional negligence, $37.00 fine)</option>
    </select>
  </div>

  <!-- Spinner -->
  <div class="spinner-area" :class="showSpinner && 'active'">
    <div class="receipt-spinner"></div>
    <div class="spinner-label">Processing your emotional audit — please wait</div>
    <div class="spinner-timer">Estimated processing time: <strong>47</strong> seconds</div>
    <div class="progress-bar">
      <div class="progress-fill" :style="'width:' + progressPct + '%'"></div>
    </div>
  </div>

  <!-- Result -->
  <div class="result-box" :class="showResult && 'active'">
    <template x-if="selectedEmotion === 'nothing'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> Based on your declared emotional response, you owe the United States Department of Emotional Revenue <span class="penalty">$37.00</span>. This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
        <span class="note">NOTE: Claiming to feel nothing upon encountering evidence of a human life is itself an emotional event. Your case has been referred to the Office of Suspicious Numbness.</span>
      </div>
    </template>
    <template x-if="selectedEmotion === 'regret'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> A 5% surtax on overwhelming regret has been calculated at <span class="penalty">$37.00</span> (flat rate — the IRS does not scale grief). This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
      </div>
    </template>
    <template x-if="selectedEmotion === 'amusement'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> Fleeting amusement is technically non-taxable, however the Department has flagged your case for review. You experienced amusement without proper justification. A provisional fine of <span class="penalty">$37.00</span> has been assessed. This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
      </div>
    </template>
    <template x-if="selectedEmotion === 'unclassifiable'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> Your emotion has been filed under Schedule G (Unclassifiable Feelings). A processing fee of <span class="penalty">$37.00</span> has been applied for the additional administrative burden of naming what you could not. This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
      </div>
    </template>
    <template x-if="selectedEmotion === 'conviction'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> The sudden conviction that time is a bureaucratic error is classified as a Form 4868 (Automatic Extension of Existential Dread). A flat fee of <span class="penalty">$37.00</span> has been assessed. This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
      </div>
    </template>
    <template x-if="selectedEmotion === 'suspicious-joy'">
      <div>
        <strong>PRELIMINARY ASSESSMENT:</strong> Joy followed by suspicion of fraud is itself a taxable event under IRC §1978.07(b). The Department has assessed a fine of <span class="penalty">$37.00</span> for experiencing happiness without the confidence to keep it. This amount is non-negotiable and also non-collectible. It exists only as a record of what you felt. Payment is not accepted.
      </div>
    </template>
  </div>

  <!-- SECTION D -->
  <div class="section-hdr">Section D: Certification</div>

  <div class="cert-row">
    <input type="checkbox" id="certify" @change="certified = $event.target.checked"/>
    <label for="certify">I certify, under penalty of perjury, that the information on this form is true, correct, and emotionally honest to the best of my current capacity for self-awareness (which I acknowledge may be limited).</label>
  </div>

  <button class="submit-btn" :class="certified && showResult && 'visible'" @click="handleSubmit()">
    <span x-text="submitText">SUBMIT</span>
  </button>

  <div class="submit-msg" :class="submitting && 'show'">
    Your form is being transmitted to the National Archive of Feelings. Do not close this window. Do not refresh. Do not look away.
  </div>

  <!-- Footer -->
  <div class="footer-personal">
    My grandfather filled out his 1040 like he was writing a letter to someone who would never read it. I think about that every night in this building. — C. Bexley, Night Shift, City Archives, Topeka
  </div>

  <div class="footer-legal" id="legalText">
    FadedReceipt.gov is not affiliated with the Internal Revenue Service, the Department of the Treasury, or any agency capable of processing human emotion. Lydia Voss and her "TumblerArchives" have no jurisdiction here. Est. March 2011. This form has never been successfully submitted.
  </div>

  <!-- Lockout overlay -->
  <div class="lockout-banner" :class="lockedOut && 'active'" id="lockoutBanner">
    <h2>FORM INTEGRITY VIOLATION DETECTED — CODE 7(b): DUAL EMOTIONAL FILING</h2>
    <p>You are required to visit your nearest IRS field office within 48 hours and submit a handwritten apology on pre-1989 letterhead. A 10-second instructional recording will now play.</p>
    <p x-show="lockoutPhase >= 1" style="margin-top:12px">Thank you for your compliance. This page will remain locked. Please close your browser and sit quietly for a moment.</p>
    <span class="appeal-link" @click="showAppeal = true">File Form ER-1099-APPEAL to restore access</span>
    <div class="lockout-appeal" :class="showAppeal && 'show'">
      <label>Enter your Apology Reference Number:</label>
      <input type="text" placeholder="ARN-XXXX-XXXX" @input=""/>
    </div>
  </div>

</div>

<script>
document.addEventListener('alpine:init', function() {
  Alpine.data('auditForm', function() {
    return {
      ssnCount: 0,
      ssnComplete: false,
      charCount: 0,
      stutterOffset: 0,
      get displayCount() {
        return Math.max(0, this.charCount + this.stutterOffset);
      },
      selectedEmotion: '',
      showSpinner: false,
      showResult: false,
      progressPct: 0,
      lastClickTime: 0,
      rapidClicks: 0,
      certified: false,
      submitText: 'SUBMIT',
      submitting: false,
      fadeInterval: null,
      lockedOut: false,
      lockoutPhase: 0,
      showAppeal: false,
      _progressInterval: null,

      init() {
        var self = this;
        if (localStorage.getItem('fadedreceipt_locked') === 'true') {
          this.lockedOut = true;
          this.lockoutPhase = 1;
        }
        setInterval(function() {
          if (self.charCount > 10) {
            self.stutterOffset = -3;
            setTimeout(function() { self.stutterOffset = 0; }, 800);
          }
        }, 7000);
        var titles = ['FadedReceipt.gov \u2014 Form ER-1099-GRIEF', 'FadedReceipt.gov \u2014 Please Hold'];
        var ti = 0;
        setInterval(function() {
          ti = 1 - ti;
          document.title = titles[ti];
        }, 30000);
        setInterval(function() {
          var el = document.getElementById('legalText');
          if (!el) return;
          var text = el.textContent;
          if (text.length < 10) return;
          var idx = Math.floor(Math.random() * text.length);
          var orig = el.innerHTML;
          if (idx < orig.length && orig[idx] !== '<' && orig[idx] !== '>') {
            var before = orig.slice(0, idx);
            var ch = orig[idx];
            var after = orig.slice(idx + 1);
            el.innerHTML = before + '<span style="color:rgba(43,58,66,0.15);transition:color 2s">' + ch + '</span>' + after;
            setTimeout(function() { el.innerHTML = orig; }, 5000);
          }
        }, 60000);

        // SSN hint click handler
        var hint = document.querySelector('.hint');
        if (hint) {
          hint.addEventListener('click', function() {
            var inp = document.getElementById('ssnInput');
            inp.style.pointerEvents = 'auto';
            inp.style.opacity = '1';
            inp.style.position = 'static';
            inp.focus();
          });
        }
      },

      handleSsn(event) {
        var val = event.target.value.replace(/\D/g, '');
        if (val.length > 9) val = val.slice(0, 9);
        event.target.value = val;
        this.ssnCount = 0;
        this.ssnComplete = false;
        var self = this;
        val.split('').forEach(function(_, i) {
          setTimeout(function() {
            self.ssnCount = i + 1;
            if (i === 8) { self.ssnComplete = true; }
          }, (i + 1) * 400);
        });
      },

      handleEmotionSelect(event) {
        var val = event.target.value;
        if (!val) return;
        var self = this;
        var now = Date.now();
        if (now - this.lastClickTime < 1500) {
          this.rapidClicks++;
        } else {
          this.rapidClicks = 1;
        }
        this.lastClickTime = now;
        if (this.rapidClicks >= 8) {
          this.triggerLockout();
          return;
        }
        this.selectedEmotion = val;
        this.showSpinner = true;
        this.showResult = false;
        this.progressPct = 0;
        if (this._progressInterval) clearInterval(this._progressInterval);
        var pct = 0;
        var goingUp = true;
        this._progressInterval = setInterval(function() {
          if (goingUp) {
            pct += 0.7;
            if (pct >= 73) goingUp = false;
          } else {
            pct = 71;
            goingUp = true;
          }
          self.progressPct = pct;
        }, 500);
        setTimeout(function() {
          self.showResult = true;
        }, 15000);
      },

      triggerLockout() {
        this.lockedOut = true;
        localStorage.setItem('fadedreceipt_locked', 'true');
        var self = this;
        try {
          var ctx = new (window.AudioContext || window.webkitAudioContext)();
          var osc = ctx.createOscillator();
          osc.type = 'sine';
          osc.frequency.value = 60;
          var gain = ctx.createGain();
          gain.gain.value = 0.15;
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start();
          osc.stop(ctx.currentTime + 10);
          for (var i = 0; i < 10; i++) {
            (function(time) {
              var click = ctx.createOscillator();
              click.type = 'square';
              click.frequency.value = 800;
              var cg = ctx.createGain();
              cg.gain.value = 0.08;
              click.connect(cg);
              cg.connect(ctx.destination);
              click.start(ctx.currentTime + time);
              click.stop(ctx.currentTime + time + 0.05);
            })(i);
          }
          setTimeout(function() { self.lockoutPhase = 1; }, 10000);
        } catch (e) {
          setTimeout(function() { self.lockoutPhase = 1; }, 10000);
        }
      },

      handleSubmit() {
        if (this.submitting) return;
        this.submitting = true;
        this.submitText = 'SUBMITTING...';
        var wrap = document.getElementById('formWrap');
        var opacity = 1;
        var interval = setInterval(function() {
          opacity -= 0.0003;
          if (opacity <= 0) { opacity = 0; clearInterval(interval); }
          wrap.style.opacity = opacity;
        }, 50);
      }
    };
  });
});
</script>
<script defer src="/assets/js/alpine.min.js"></script>

</body>
</html>
