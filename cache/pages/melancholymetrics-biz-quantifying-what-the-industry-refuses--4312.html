<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>melancholymetrics.biz — quantifying what the industry refuses to measure</title>
<link rel="stylesheet" href="/assets/css/fonts.css">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #E8E4DF;
  --text: #3A3A3A;
  --accent: #98FF98;
  --card-bg: #D5CFC7;
  --card-border: #B8B2A9;
  --muted: #8A847C;
  --glitch: #C4D7CF;
  --font-heading: 'Work Sans', sans-serif;
  --font-body: 'Inter', sans-serif;
  --font-mono: 'Fira Code', monospace;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  font-size: 17px;
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
}

.container {
  max-width: 780px;
  margin: 0 auto;
  padding: 60px 24px 120px;
}

hr {
  border: none;
  border-top: 1px solid var(--card-border);
  margin: 0;
}

.section {
  padding: 80px 0;
}

/* Fade-in on scroll — start invisible, JS will animate */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
}

/* HEADER */
.header { padding: 60px 0 0; }

.site-title {
  font-family: var(--font-heading);
  font-weight: 400;
  font-size: clamp(1.6rem, 4vw, 2.2rem);
  letter-spacing: 0.15em;
  text-transform: lowercase;
  color: var(--text);
  margin-bottom: 12px;
}

.tagline {
  font-family: var(--font-mono);
  font-size: 0.82rem;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.status-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  animation: blink 2.5s ease-in-out infinite;
  flex-shrink: 0;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.2; }
}

.header hr { margin-top: 40px; }

/* METRICS DASHBOARD */
.metrics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 24px;
}

@media (max-width: 560px) {
  .metrics-grid { grid-template-columns: 1fr; }
}

.metric-panel {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  padding: 28px 24px;
  position: relative;
  overflow: hidden;
}

.metric-panel::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: var(--accent);
  transform: translateX(-100%);
  opacity: 0;
}

.metric-label {
  font-family: var(--font-heading);
  font-size: 0.75rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}

.metric-value {
  font-family: var(--font-mono);
  font-size: clamp(2.4rem, 6vw, 3.2rem);
  font-weight: 700;
  color: var(--text);
  line-height: 1.1;
  margin-bottom: 16px;
  transition: color 0.15s;
}

.metric-panel .sparkline-container {
  height: 32px;
  width: 100%;
}

.metric-panel .sparkline-container svg {
  width: 100%;
  height: 100%;
}

.sparkline-path {
  fill: none;
  stroke: var(--accent);
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.metric-disclaimer {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  font-style: italic;
  color: var(--muted);
  line-height: 1.5;
}

/* Tooltip */
.metric-panel .tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--text);
  color: var(--bg);
  font-family: var(--font-mono);
  font-size: 0.7rem;
  padding: 8px 12px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
  z-index: 10;
  max-width: 280px;
  white-space: normal;
  text-align: center;
}

.metric-panel:hover .tooltip {
  opacity: 1;
}

/* Glitch animation on panels */
@keyframes glitchScanline {
  0% { top: -4px; opacity: 0; }
  10% { opacity: 0.7; }
  100% { top: calc(100% + 4px); opacity: 0; }
}

.metric-panel .scanline {
  position: absolute;
  left: 0; right: 0;
  height: 2px;
  background: var(--glitch);
  opacity: 0;
  pointer-events: none;
  z-index: 2;
}

/* THESIS */
.thesis p {
  margin-bottom: 20px;
}

.thesis .callout {
  font-family: var(--font-mono);
  font-size: 1.15rem;
  color: var(--text);
  margin: 32px 0;
  line-height: 1.6;
}

.footnote {
  font-size: 0.82rem;
  color: var(--muted);
  cursor: pointer;
  border-bottom: 1px dashed var(--card-border);
  display: inline;
  transition: color 0.2s;
}

.footnote:hover { color: var(--text); }

.footnote-expand {
  display: none;
  font-size: 0.82rem;
  color: var(--muted);
  font-style: italic;
  margin-top: 8px;
  padding-left: 16px;
  border-left: 2px solid var(--card-border);
}

.footnote-expand.visible {
  display: block;
}

/* CASE STUDY */
.case-study-panel {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  padding: 36px 28px;
}

@media (max-width: 500px) {
  .case-study-panel { padding: 24px 18px; }
}

.case-study-panel h3 {
  font-family: var(--font-mono);
  font-size: 0.85rem;
  letter-spacing: 0.06em;
  color: var(--muted);
  margin-bottom: 20px;
}

.case-study-panel p {
  margin-bottom: 20px;
}

/* CSS bar chart */
.bar-chart {
  margin-top: 28px;
}

.bar-row {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  gap: 12px;
}

.bar-label {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: var(--muted);
  min-width: 140px;
  text-align: right;
  flex-shrink: 0;
}

@media (max-width: 500px) {
  .bar-row { flex-direction: column; align-items: flex-start; gap: 4px; }
  .bar-label { text-align: left; min-width: auto; }
}

.bar-track {
  flex: 1;
  height: 22px;
  background: var(--bg);
  border: 1px solid var(--card-border);
  position: relative;
  overflow: hidden;
  min-width: 0;
  width: 100%;
}

.bar-fill {
  height: 100%;
  background: var(--accent);
  transition: width 0.8s ease-out;
  position: relative;
}

.bar-fill.glitch-bar {
  animation: none;
}

@keyframes barGlitch {
  0% { transform: translateX(0); background: var(--accent); }
  25% { transform: translateX(3px); background: var(--glitch); }
  50% { transform: translateX(-2px); background: var(--accent); }
  75% { transform: translateX(1px); background: var(--glitch); }
  100% { transform: translateX(0); background: var(--accent); }
}

.bar-score {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--text);
  min-width: 36px;
  flex-shrink: 0;
}

/* FULL-WIDTH METRIC BAR */
.full-width-bar {
  width: 100vw;
  margin-left: calc(-50vw + 50%);
  background: var(--card-bg);
  border-top: 1px solid var(--card-border);
  border-bottom: 1px solid var(--card-border);
  padding: 20px 24px;
  text-align: center;
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: var(--muted);
  overflow: hidden;
}

/* TESTIMONIALS */
.testimonial {
  border-left: 3px solid var(--card-border);
  padding: 20px 24px;
  margin-bottom: 36px;
  position: relative;
}

.testimonial blockquote {
  font-style: italic;
  margin-bottom: 12px;
  font-size: 1rem;
  line-height: 1.7;
}

.testimonial .attribution {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: var(--muted);
  margin-bottom: 8px;
}

.testimonial .scores {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--accent);
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}

/* VISUALIZER */
.upload-zone {
  border: 2px dashed var(--card-border);
  padding: 48px 24px;
  text-align: center;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s;
  position: relative;
  min-height: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.upload-zone:hover,
.upload-zone.dragover {
  border-color: var(--accent);
  background: rgba(152, 255, 152, 0.04);
}

.upload-zone .placeholder {
  font-family: var(--font-mono);
  font-size: 0.85rem;
  color: var(--muted);
  max-width: 360px;
  line-height: 1.6;
}

.upload-zone input[type="file"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
  width: 100%;
  height: 100%;
}

.preview-container {
  width: 100%;
  position: relative;
  display: none;
}

.preview-container img {
  width: 100%;
  max-height: 400px;
  object-fit: cover;
  filter: hue-rotate(180deg) saturate(0.6) brightness(1.1);
}

.preview-container .scanlines-overlay {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.06) 2px,
    rgba(0,0,0,0.06) 4px
  );
  pointer-events: none;
}

.faded-glory-score {
  font-family: var(--font-mono);
  font-size: clamp(2rem, 5vw, 2.8rem);
  font-weight: 700;
  color: var(--accent);
  margin-top: 20px;
  text-align: center;
  display: none;
}

.faded-glory-caption {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: var(--muted);
  text-align: center;
  margin-top: 8px;
  display: none;
}

/* FOOTER */
.footer {
  padding-bottom: 40px;
}

.footer h4 {
  font-family: var(--font-heading);
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 16px;
}

.footer p {
  font-size: 0.92rem;
  margin-bottom: 16px;
  color: var(--text);
}

.footer .colophon {
  font-family: var(--font-mono);
  font-size: 0.72rem;
  color: var(--muted);
  line-height: 1.7;
}

/* SECTION HEADINGS */
h2 {
  font-family: var(--font-heading);
  font-weight: 400;
  font-size: clamp(1.1rem, 3vw, 1.4rem);
  letter-spacing: 0.04em;
  color: var(--text);
  margin-bottom: 28px;
}

/* Responsive */
@media (max-width: 500px) {
  .section { padding: 56px 0; }
  .container { padding: 40px 18px 100px; }
}
</style>
</head>
<body>
<div class="container" x-data="melancholyApp()">

  <!-- HEADER -->
  <header class="header">
    <h1 class="site-title">melancholymetrics.biz</h1>
    <div class="tagline">
      <span>quantifying what the industry refuses to measure. est. 2017.</span>
      <span class="status-dot" aria-label="System status: live"></span>
    </div>
    <hr style="margin-top: 40px;">
  </header>

  <!-- LIVE METRICS DASHBOARD -->
  <section class="section fade-in">
    <div class="metrics-grid">
      <!-- Saudade Score -->
      <div class="metric-panel" id="saudade-panel">
        <div class="tooltip">This number is real. It measures nothing you were trained to optimize for.</div>
        <div class="scanline"></div>
        <div class="metric-label">Saudade Score</div>
        <div class="metric-value" id="saudade-value">73.4</div>
        <div class="sparkline-container">
          <svg viewBox="0 0 200 32" preserveAspectRatio="none">
            <path class="sparkline-path" id="saudade-sparkline" d=""></path>
          </svg>
        </div>
      </div>
      <!-- Desolation Index -->
      <div class="metric-panel" id="desolation-panel">
        <div class="tooltip">This number is real. It measures nothing you were trained to optimize for.</div>
        <div class="scanline"></div>
        <div class="metric-label">Desolation Index</div>
        <div class="metric-value" id="desolation-value">41.7</div>
        <div class="sparkline-container">
          <svg viewBox="0 0 200 32" preserveAspectRatio="none">
            <path class="sparkline-path" id="desolation-sparkline" d=""></path>
          </svg>
        </div>
      </div>
    </div>
    <p class="metric-disclaimer">Scores reflect aggregate emotional weight across 2.3M monitored content nodes. Cultural bias disclaimer applies.</p>
  </section>

  <hr>

  <!-- FULL-WIDTH METRIC BAR -->
  <div class="full-width-bar fade-in">
    ▓▓▓▓▓▓▓░░░ REAL-TIME LONGING SATURATION: 67.2% ░░░▓▓▓▓▓▓▓
  </div>

  <hr>

  <!-- THE THESIS -->
  <section class="section thesis fade-in">
    <h2>The problem.</h2>
    <p>The analytics industry has spent two decades building instruments of extraordinary precision to measure things of extraordinary irrelevance. We know, to the tenth of a percentage point, how many people hovered over a button. We have no idea whether any of them felt anything.</p>
    <p>Engagement is not feeling. A click is not a connection. A share is not solidarity. The entire measurement apparatus of the modern internet is a stethoscope pressed against a mannequin, and everyone in the room is nodding at the readings.</p>
    <p>MelancholyMetrics exists because someone had to build the instrument nobody asked for. Our models measure saudade — the Portuguese word for a longing so specific it doesn't translate — and desolation, the particular emptiness of content that fills space without occupying it. We score these in real time. Nobody has paid us to do this.</p>
    <p class="callout">"Nobody has ever cried at a click-through rate."</p>
    <p>
      <span class="footnote" x-on:click="benNote = !benNote">Ben, if you're reading this, the dog-walking app also failed.</span>
    </p>
    <div class="footnote-expand" x-bind:class="benNote ? 'visible' : ''" x-cloak>
      The app was called "PawFolio." It had seventeen users. Fifteen were Ben.
    </div>
  </section>

  <hr>

  <!-- CASE STUDY -->
  <section class="section fade-in">
    <div class="case-study-panel">
      <h3>Case Study #0047: Urbex Angst Quantification</h3>
      <p>Between March and August 2023, we processed 14,000 photographs of abandoned shopping malls sourced from urbex forums, estate liquidation archives, and one particularly prolific Reddit user named DeadMallWalker99. Each image was scored across both axes.</p>
      <p>Findings: shattered skylights with visible plant growth scored highest on the Saudade Score — the intrusion of life into commercial ruin apparently triggers maximum longing. Empty food courts, conversely, peaked the Desolation Index. Something about a Sbarro sign with no one beneath it.</p>

      <div class="bar-chart" id="bar-chart">
        <div class="bar-row">
          <span class="bar-label">Shattered Skylights</span>
          <div class="bar-track"><div class="bar-fill" data-width="92" style="width:0%"></div></div>
          <span class="bar-score">92.1</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Empty Escalators</span>
          <div class="bar-track"><div class="bar-fill" data-width="78" style="width:0%"></div></div>
          <span class="bar-score">78.4</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Faded Signage</span>
          <div class="bar-track"><div class="bar-fill" data-width="71" style="width:0%"></div></div>
          <span class="bar-score">71.0</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Intact Mannequins</span>
          <div class="bar-track"><div class="bar-fill" data-width="85" style="width:0%"></div></div>
          <span class="bar-score">85.6</span>
        </div>
      </div>
    </div>
  </section>

  <hr>

  <!-- TESTIMONIALS -->
  <section class="section fade-in">
    <h2>Field reports.</h2>

    <div class="testimonial">
      <blockquote>"I have been a taxidermist for twenty-three years. I did not know there was a number for how an animal's glass eyes make people feel until MelancholyMetrics scored my portfolio. The lynx got a 94.2. I wept."</blockquote>
      <div class="attribution">— Licensed Taxidermist, Wisconsin</div>
      <div class="scores">
        <span>Saudade: 88.3</span>
        <span>Desolation: 61.7</span>
      </div>
    </div>

    <div class="testimonial">
      <blockquote>"I showed the Desolation Index to my VP. She said 'this is just sadness with a spreadsheet.' She was right. She still approved the budget."</blockquote>
      <div class="attribution">— Regional Content Strategist, name withheld</div>
      <div class="scores">
        <span>Saudade: 44.1</span>
        <span>Desolation: 79.8</span>
      </div>
    </div>

    <p style="font-size: 0.82rem; color: #8A847C; margin-top: 16px;">
      <span class="footnote" x-on:click="fieldNote = !fieldNote">All field reports scored by MelancholyMetrics upon submission. Testimonials are not exempt from measurement.</span>
    </p>
    <div class="footnote-expand" x-bind:class="fieldNote ? 'visible' : ''" x-cloak>
      The VP's email approving the budget scored a 12.4 on the Desolation Index. The lowest we've ever recorded. Corporate decisiveness is the opposite of longing.
    </div>
  </section>

  <hr>

  <!-- VAPORWAVE VISUALIZER -->
  <section class="section fade-in">
    <h2>Free tool: Vaporwave Visualizer</h2>

    <div class="upload-zone" id="upload-zone"
         x-on:dragover.prevent="isDragging = true"
         x-on:dragleave.prevent="isDragging = false"
         x-on:drop.prevent="handleDrop($event)"
         x-bind:class="isDragging ? 'dragover' : ''">

      <div class="placeholder" x-show="!imageLoaded">
        Drop an image here to quantify its faded glory.<br>Or don't. It doesn't matter either way.
      </div>

      <div class="preview-container" x-show="imageLoaded" style="display:none;" x-bind:style="imageLoaded ? 'display:block' : 'display:none'">
        <img x-bind:src="imageSrc" alt="Processed image">
        <div class="scanlines-overlay"></div>
      </div>

      <input type="file" accept="image/*" x-on:change="handleFile($event)" aria-label="Upload image">
    </div>

    <div class="faded-glory-score" x-show="imageLoaded" x-bind:style="imageLoaded ? 'display:block' : 'display:none'">
      Faded Glory Index: <span x-text="fadedGloryScore"></span>
    </div>
    <div class="faded-glory-caption" x-show="imageLoaded" x-bind:style="imageLoaded ? 'display:block' : 'display:none'">
      Optimal palette applied. Your image now carries <span x-text="fadedGloryScore - 34"></span>% more longing.
    </div>
  </section>

  <hr>

  <!-- FOOTER -->
  <footer class="section footer">
    <h4>The abyss gazes also.</h4>
    <p>We are aware that quantifying melancholy for the purpose of marketing optimization is precisely the kind of instrumentalization this platform was built to critique. We built the instrument anyway. The paradox is the product. If you can measure the ache, you can sell the ache, and if you can sell the ache, you have become the thing you were measuring. We have no resolution for this. We suspect no one does.</p>
    <p class="colophon">© 2017–2025 MelancholyMetrics.biz · Anya Petrova, sole proprietor · Funding status: unfunded · Uptime: emotional</p>
  </footer>

</div>

<script src="/assets/js/alpine.min.js" defer></script>
<script src="/assets/js/gsap.min.js"></script>
<script>
document.addEventListener('alpine:init', function() {
  Alpine.data('melancholyApp', function() {
    return {
      benNote: false,
      fieldNote: false,
      imageLoaded: false,
      imageSrc: '',
      fadedGloryScore: 0,
      isDragging: false,

      handleDrop: function(e) {
        this.isDragging = false;
        var files = e.dataTransfer.files;
        if (files.length > 0 && files[0].type.startsWith('image/')) {
          this.processFile(files[0]);
        }
      },

      handleFile: function(e) {
        var files = e.target.files;
        if (files.length > 0) {
          this.processFile(files[0]);
        }
      },

      processFile: function(file) {
        var self = this;
        var reader = new FileReader();
        reader.onload = function(e) {
          self.imageSrc = e.target.result;
          self.imageLoaded = true;
          self.fadedGloryScore = Math.floor(Math.random() * 60) + 40;
        };
        reader.readAsDataURL(file);
      }
    };
  });
});

document.addEventListener('DOMContentLoaded', function() {

  // ---- SPARKLINE GENERATION ----
  function generateSparklinePoints(count, minY, maxY) {
    var points = [];
    var step = 200 / (count - 1);
    for (var i = 0; i < count; i++) {
      var y = minY + Math.random() * (maxY - minY);
      points.push({ x: i * step, y: y });
    }
    return points;
  }

  function pointsToPath(points) {
    var d = 'M ' + points[0].x + ' ' + points[0].y;
    for (var i = 1; i < points.length; i++) {
      d += ' L ' + points[i].x + ' ' + points[i].y;
    }
    return d;
  }

  var saudadePoints = generateSparklinePoints(24, 6, 28);
  var desolationPoints = generateSparklinePoints(24, 6, 28);

  var saudadePath = document.getElementById('saudade-sparkline');
  var desolationPath = document.getElementById('desolation-sparkline');

  saudadePath.setAttribute('d', pointsToPath(saudadePoints));
  desolationPath.setAttribute('d', pointsToPath(desolationPoints));

  // Animate sparkline draw
  function animateSparkline(pathEl) {
    var length = pathEl.getTotalLength();
    pathEl.style.strokeDasharray = length;
    pathEl.style.strokeDashoffset = length;
    gsap.fromTo(pathEl,
      { strokeDashoffset: length },
      { strokeDashoffset: 0, duration: 2, ease: 'power2.out' }
    );
  }

  animateSparkline(saudadePath);
  animateSparkline(desolationPath);

  // ---- DRIFTING METRIC COUNTERS ----
  var saudadeVal = 73.4;
  var desolationVal = 41.7;
  var saudadeEl = document.getElementById('saudade-value');
  var desolationEl = document.getElementById('desolation-value');

  function drift(current, min, max) {
    var delta = (Math.random() - 0.5) * 0.6;
    var next = current + delta;
    if (next < min) next = min + 0.1;
    if (next > max) next = max - 0.1;
    return Math.round(next * 10) / 10;
  }

  setInterval(function() {
    saudadeVal = drift(saudadeVal, 68, 79);
    saudadeEl.textContent = saudadeVal.toFixed(1);
  }, 2300);

  setInterval(function() {
    desolationVal = drift(desolationVal, 36, 48);
    desolationEl.textContent = desolationVal.toFixed(1);
  }, 2700);

  // ---- GLITCH PULSE ON METRIC PANELS ----
  function glitchPanel(panel, valueEl) {
    var scanline = panel.querySelector('.scanline');
    // Horizontal displacement
    var offset = (Math.random() > 0.5 ? 1 : -1) * (2 + Math.random() * 2);
    gsap.fromTo(panel,
      { x: offset },
      { x: 0, duration: 0.15, ease: 'power1.out' }
    );
    // Flash text color
    gsap.fromTo(valueEl,
      { color: '#98FF98' },
      { color: '#3A3A3A', duration: 0.3, ease: 'power1.out' }
    );
    // Scanline sweep
    gsap.fromTo(scanline,
      { top: '-4px', opacity: 0.7 },
      { top: '100%', opacity: 0, duration: 0.4, ease: 'none' }
    );
  }

  function scheduleGlitch(panel, valueEl) {
    var delay = 4000 + Math.random() * 2000;
    setTimeout(function() {
      glitchPanel(panel, valueEl);
      scheduleGlitch(panel, valueEl);
    }, delay);
  }

  var saudadePanel = document.getElementById('saudade-panel');
  var desolationPanel = document.getElementById('desolation-panel');

  scheduleGlitch(saudadePanel, saudadeEl);
  scheduleGlitch(desolationPanel, desolationEl);

  // ---- FADE-IN ON SCROLL ----
  var fadeEls = document.querySelectorAll('.fade-in');
  var fadeObserver = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        gsap.fromTo(entry.target,
          { opacity: 0, y: 20 },
          { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' }
        );
        fadeObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15 });

  fadeEls.forEach(function(el) {
    fadeObserver.observe(el);
  });

  // ---- BAR CHART ANIMATION ON SCROLL ----
  var barChart = document.getElementById('bar-chart');
  var barFills = barChart.querySelectorAll('.bar-fill');
  var barAnimated = false;

  var barObserver = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting && !barAnimated) {
        barAnimated = true;
        barFills.forEach(function(fill, i) {
          var targetWidth = fill.getAttribute('data-width') + '%';
          gsap.fromTo(fill,
            { width: '0%' },
            {
              width: targetWidth,
              duration: 1,
              delay: i * 0.15,
              ease: 'power2.out',
              onComplete: function() {
                // Trigger glitch on each bar
                fill.style.animation = 'barGlitch 0.3s ease-in-out';
                setTimeout(function() {
                  fill.style.animation = 'none';
                }, 300);
              }
            }
          );
        });
      }
    });
  }, { threshold: 0.3 });

  barObserver.observe(barChart);

  // Re-trigger bar glitch on re-entry
  var barGlitchObserver = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting && barAnimated) {
        barFills.forEach(function(fill, i) {
          setTimeout(function() {
            fill.style.animation = 'barGlitch 0.3s ease-in-out';
            setTimeout(function() {
              fill.style.animation = 'none';
            }, 300);
          }, i * 100);
        });
      }
    });
  }, { threshold: 0.3 });

  barGlitchObserver.observe(barChart);

});
</script>
</body>
</html>
