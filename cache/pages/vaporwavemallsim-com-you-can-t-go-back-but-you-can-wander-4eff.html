<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VaporwaveMallSim.com — You Can't Go Back, But You Can Wander</title>
<link rel="stylesheet" href="/assets/css/fonts.css">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #0D0B1A;
  --text: #E8D5F5;
  --accent: #B47AEA;
  --teal: #2EECD6;
  --pink: #FF6B9D;
  --card-bg: #1A1530;
  --font-heading: 'Josefin Sans', sans-serif;
  --font-body: 'Work Sans', sans-serif;
  --font-mono: 'Fira Code', monospace;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  font-size: 17px;
  line-height: 1.6;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

h1, h2, h3, h4, h5, h6 { font-family: var(--font-heading); font-weight: 600; letter-spacing: 0.02em; }

a { color: var(--pink); text-decoration: none; }
a:hover { text-decoration: underline; }

.container { max-width: 1100px; margin: 0 auto; padding: 0 24px; width: 100%; }

.section-divider {
  height: 1px;
  background: var(--teal);
  opacity: 0.4;
  width: 100%;
}
.section-divider.pulse { animation: dividerPulse 1s ease-out forwards; }
@keyframes dividerPulse {
  0% { opacity: 0.4; box-shadow: 0 0 0px var(--teal); }
  50% { opacity: 1; box-shadow: 0 0 12px var(--teal); }
  100% { opacity: 0.4; box-shadow: 0 0 0px var(--teal); }
}

.fade-section { opacity: 0; transform: translateY(30px); }

/* ═══ HERO ═══ */
.hero {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(var(--hero-angle, 0deg), var(--bg) 0%, var(--card-bg) 50%, var(--bg) 100%);
  animation: heroGradient 30s linear infinite;
  z-index: 0;
}

@keyframes heroGradient {
  0% { --hero-angle: 0deg; }
  100% { --hero-angle: 360deg; }
}

@property --hero-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

.hero::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(46,236,214,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(46,236,214,0.03) 1px, transparent 1px);
  background-size: 60px 60px;
  z-index: 1;
}

.hero-content { position: relative; z-index: 2; padding: 40px 24px; }

.hero-title {
  font-family: var(--font-heading);
  font-size: clamp(3.5rem, 10vw, 8rem);
  font-weight: 700;
  line-height: 0.95;
  text-transform: uppercase;
  letter-spacing: -0.02em;
  color: var(--text);
  margin-bottom: 32px;
}

.hero-title span { display: block; }
.hero-title .vapor { color: var(--accent); }
.hero-title .mall { color: var(--teal); }
.hero-title .sim { color: var(--pink); }

.hero-sub {
  font-family: var(--font-mono);
  font-size: clamp(0.8rem, 1.8vw, 1rem);
  color: #C4AAD9;
  max-width: 600px;
  margin: 0 auto 48px;
  line-height: 1.7;
}

.enter-btn {
  display: inline-block;
  font-family: var(--font-mono);
  font-size: 1rem;
  color: var(--bg);
  background: var(--teal);
  border: none;
  padding: 16px 48px;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  transition: background 0.2s, transform 0.2s;
  animation: btnPulse 3s ease-in-out infinite;
  min-height: 48px;
}

.enter-btn:hover { background: #5AF2E0; transform: translateY(-2px); }

@keyframes btnPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(46,236,214,0.4); }
  50% { box-shadow: 0 0 20px 4px rgba(46,236,214,0.2); }
}

/* ═══ WHAT IS ═══ */
.what-is { padding: 80px 0; }

.what-is-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
  border: 1px solid var(--teal);
}

.what-is-left {
  padding: 48px;
  border-right: 1px solid var(--teal);
}

.what-is-left h2 {
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  color: var(--teal);
  text-transform: uppercase;
  margin-bottom: 24px;
  letter-spacing: 0.05em;
}

.what-is-left p {
  margin-bottom: 16px;
  color: #C4AAD9;
  font-size: 0.95rem;
}

.what-is-right {
  padding: 48px;
  background: var(--card-bg);
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.stat-row {
  font-family: var(--font-mono);
  font-size: clamp(0.8rem, 1.5vw, 0.95rem);
  padding: 16px 0;
  border-bottom: 1px solid rgba(46,236,214,0.15);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.stat-row:last-child { border-bottom: none; }

.stat-label { color: #8B7AA0; text-transform: uppercase; letter-spacing: 0.08em; font-size: 0.75rem; }
.stat-value { color: var(--teal); font-size: 1.3rem; }

/* ═══ MALLSOFT ═══ */
.mallsoft { padding: 80px 0; }

.mallsoft h2 {
  font-size: clamp(1.4rem, 3vw, 2rem);
  text-transform: uppercase;
  color: var(--accent);
  margin-bottom: 8px;
  letter-spacing: 0.05em;
}

.mallsoft-sub {
  font-family: var(--font-mono);
  font-size: 0.8rem;
  color: #8B7AA0;
  margin-bottom: 32px;
}

.player-card {
  border: 1px solid var(--teal);
  background: var(--card-bg);
  padding: 32px;
}

.player-controls {
  display: flex;
  align-items: center;
  gap: 24px;
  margin-bottom: 24px;
}

.play-btn {
  width: 56px;
  height: 56px;
  background: var(--teal);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  min-width: 48px;
  min-height: 48px;
}

.play-btn svg { width: 24px; height: 24px; fill: var(--bg); stroke: none; }

.waveform {
  display: flex;
  align-items: flex-end;
  gap: 3px;
  height: 48px;
  flex: 1;
}

.wave-bar {
  width: 4px;
  background: var(--accent);
  height: 8px;
  transition: height 0.15s ease;
}

.waveform.playing .wave-bar { animation: waveAnim 0.6s ease-in-out infinite alternate; }

@keyframes waveAnim {
  0% { height: var(--min-h, 6px); }
  100% { height: var(--max-h, 40px); }
}

.track-list { list-style: none; }

.track-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 0;
  border-bottom: 1px solid rgba(180,122,234,0.15);
  font-family: var(--font-mono);
  font-size: 0.85rem;
  cursor: pointer;
  transition: background 0.2s;
}

.track-item:last-child { border-bottom: none; }
.track-item:hover { background: rgba(180,122,234,0.08); }

.track-icon { color: var(--pink); font-size: 1rem; flex-shrink: 0; width: 20px; text-align: center; }
.track-name { flex: 1; color: var(--text); }
.track-time { color: #8B7AA0; font-size: 0.75rem; white-space: nowrap; }

.track-item.active .track-name { color: var(--teal); }

/* ═══ LOST & FOUND ═══ */
.lost-found { padding: 80px 0; }

.lost-found h2 {
  font-size: clamp(1.4rem, 3vw, 2rem);
  text-transform: uppercase;
  color: var(--pink);
  margin-bottom: 8px;
  letter-spacing: 0.05em;
}

.lost-found-sub {
  font-family: var(--font-mono);
  font-size: 0.8rem;
  color: #8B7AA0;
  margin-bottom: 32px;
}

.lf-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
}

.lf-card {
  border: 1px solid rgba(180,122,234,0.25);
  padding: 0;
  background: var(--card-bg);
}

.lf-glitch {
  height: 180px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.lf-glitch::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    linear-gradient(135deg, var(--accent) 0%, transparent 50%),
    linear-gradient(225deg, var(--teal) 0%, transparent 40%),
    linear-gradient(315deg, var(--pink) 0%, transparent 60%);
  mix-blend-mode: screen;
  opacity: 0.6;
}

.lf-glitch::after {
  content: '';
  position: absolute;
  inset: -10%;
  background:
    linear-gradient(45deg, var(--card-bg) 25%, transparent 25%, transparent 75%, var(--card-bg) 75%),
    linear-gradient(-45deg, var(--bg) 25%, transparent 25%, transparent 75%, var(--bg) 75%);
  background-size: 30px 30px;
  mix-blend-mode: multiply;
  transform: skewX(-5deg);
}

.lf-glitch:hover { animation: glitchFlicker 0.2s steps(2) forwards; }

@keyframes glitchFlicker {
  0% { clip-path: inset(0); filter: hue-rotate(0deg); }
  25% { clip-path: inset(5% 0 10% 0); filter: hue-rotate(90deg); }
  50% { clip-path: inset(15% 0 5% 0); filter: hue-rotate(180deg); }
  75% { clip-path: inset(0 5% 0 10%); filter: hue-rotate(45deg); }
  100% { clip-path: inset(0); filter: hue-rotate(0deg); }
}

.lf-body {
  padding: 20px;
}

.lf-caption {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  color: #C4AAD9;
  line-height: 1.6;
  margin-bottom: 12px;
}

.lf-user {
  font-family: var(--font-mono);
  font-size: 0.7rem;
  color: #8B7AA0;
}

.submit-link {
  display: inline-block;
  margin-top: 32px;
  font-family: var(--font-mono);
  font-size: 0.85rem;
  color: var(--pink);
  letter-spacing: 0.05em;
  padding: 12px 0;
  min-height: 48px;
  display: flex;
  align-items: center;
}

/* ═══ MALL GHOSTS ═══ */
.mall-ghosts { padding: 80px 0; }

.mall-ghosts h2 {
  font-size: clamp(1.4rem, 3vw, 2rem);
  text-transform: uppercase;
  color: var(--accent);
  margin-bottom: 8px;
  letter-spacing: 0.05em;
}

.ghosts-intro {
  max-width: 700px;
  color: #C4AAD9;
  font-size: 0.95rem;
  margin-bottom: 40px;
  line-height: 1.7;
}

.ghost-card {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 24px;
  align-items: center;
  padding: 24px 32px;
  border: 1px solid rgba(180,122,234,0.2);
  background: var(--card-bg);
  margin-bottom: 12px;
}

.ghost-name {
  font-family: var(--font-heading);
  font-size: 1.2rem;
  color: var(--teal);
  white-space: nowrap;
}

.ghost-theory {
  font-style: italic;
  color: #C4AAD9;
  font-size: 0.88rem;
}

.ghost-sightings {
  font-family: var(--font-mono);
  font-size: 0.85rem;
  color: var(--pink);
  cursor: pointer;
  user-select: none;
  white-space: nowrap;
  min-width: 48px;
  min-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.15s;
  text-align: center;
}

.ghost-sightings.flash { color: #FFFFFF; }

/* ═══ FLIPPER ═══ */
.flipper-section {
  padding: 80px 0;
  text-align: center;
}

.dolphin-container {
  width: 280px;
  height: 200px;
  margin: 0 auto 40px;
  position: relative;
}

.dolphin-wire {
  width: 100%;
  height: 100%;
  position: relative;
}

.dolphin-wire::before {
  content: '';
  position: absolute;
  width: 200px;
  height: 120px;
  top: 40px;
  left: 40px;
  clip-path: polygon(
    5% 50%, 15% 30%, 35% 15%, 55% 10%, 75% 15%, 90% 25%,
    100% 40%, 95% 55%, 80% 60%, 70% 55%, 65% 65%, 55% 75%,
    40% 70%, 30% 65%, 20% 60%, 10% 55%
  );
  border: 2px solid var(--teal);
  background: transparent;
  box-shadow: 0 0 20px rgba(46,236,214,0.2), inset 0 0 20px rgba(46,236,214,0.05);
}

.dolphin-wire::after {
  content: '';
  position: absolute;
  width: 60px;
  height: 40px;
  top: 25px;
  right: 30px;
  clip-path: polygon(0% 100%, 50% 0%, 100% 80%);
  border: 1px solid var(--teal);
  opacity: 0.6;
}

.flipper-text {
  max-width: 500px;
  margin: 0 auto 32px;
  color: #C4AAD9;
  font-size: 0.95rem;
  line-height: 1.7;
}

.flipper-text strong { color: var(--teal); font-weight: 600; }

.download-btn {
  display: inline-block;
  font-family: var(--font-mono);
  font-size: 0.9rem;
  background: var(--pink);
  color: var(--bg);
  padding: 16px 40px;
  border: none;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  transition: background 0.2s, transform 0.2s;
  min-height: 48px;
}

.download-btn:hover { background: #FF8BB4; transform: translateY(-2px); text-decoration: none; }

/* ═══ FOOTER ═══ */
.site-footer {
  padding: 80px 0 40px;
  text-align: center;
  border-top: 1px solid rgba(46,236,214,0.2);
}

.footer-label {
  font-family: var(--font-mono);
  font-size: 0.7rem;
  color: #8B7AA0;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  margin-bottom: 16px;
}

.footer-counter {
  font-family: var(--font-mono);
  font-size: clamp(3rem, 8vw, 6rem);
  color: var(--teal);
  line-height: 1;
  margin-bottom: 32px;
}

.footer-credits {
  font-size: 0.82rem;
  color: #8B7AA0;
  max-width: 500px;
  margin: 0 auto 40px;
  line-height: 1.6;
}

.footer-micro {
  font-family: var(--font-mono);
  font-size: 0.6rem;
  color: #5A4D6B;
  letter-spacing: 0.05em;
}

/* ═══ EASTER EGG ═══ */
.easter-egg {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9998;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s;
}

.easter-egg.show { opacity: 1; }

.easter-egg-text {
  font-family: var(--font-mono);
  font-size: clamp(0.8rem, 2vw, 1.1rem);
  color: var(--teal);
  text-align: center;
  padding: 32px;
  background: rgba(13,11,26,0.95);
  border: 1px solid var(--teal);
  max-width: 500px;
}

body.inverted { filter: invert(1) hue-rotate(180deg); }

/* ═══ RESPONSIVE ═══ */
@media (max-width: 900px) {
  .what-is-grid {
    grid-template-columns: 1fr;
  }
  .what-is-left { border-right: none; border-bottom: 1px solid var(--teal); }
  .lf-grid { grid-template-columns: repeat(2, 1fr); }
  .ghost-card {
    grid-template-columns: 1fr auto;
    gap: 16px;
  }
  .ghost-theory { grid-column: 1 / -1; }
}

@media (max-width: 600px) {
  body { font-size: 16px; }
  .lf-grid { grid-template-columns: 1fr; }
  .hero-title { font-size: clamp(2.8rem, 12vw, 5rem); }
  .what-is-left, .what-is-right { padding: 28px; }
  .player-card { padding: 20px; }
  .ghost-card {
    grid-template-columns: 1fr;
    gap: 12px;
    padding: 20px;
  }
  .ghost-sightings { justify-content: flex-start; }
  .dolphin-container { width: 220px; height: 160px; }
}
</style>
</head>
<body>

<!-- ═══ HERO ═══ -->
<section class="hero" x-data>
  <div class="hero-content fade-section">
    <h1 class="hero-title">
      <span class="vapor">Vaporwave</span>
      <span class="mall">Mall</span>
      <span class="sim">Sim</span>
    </h1>
    <p class="hero-sub">Procedurally generated shopping malls. Ray-traced marble. Muzak you almost recognize. No exit.</p>
    <button class="enter-btn" onclick="document.querySelector('.what-is').scrollIntoView({behavior:'smooth'})">ENTER MALL →</button>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ WHAT IS ═══ -->
<section class="what-is">
  <div class="container">
    <div class="what-is-grid fade-section">
      <div class="what-is-left">
        <h2>What Is VaporwaveMallSim</h2>
        <p>An infinite procedural shopping mall that generates itself as you walk through it. Every corridor leads to another corridor. Every food court connects to a slightly different food court. The architecture follows rules that feel almost correct but never repeat.</p>
        <p>The muzak engine synthesizes ambient tracks in real-time from a corpus of 4,700 deconstructed smooth jazz samples. You will recognize every song. You will be able to name none of them.</p>
        <p>There are no exits. This is by design. We tried adding exits in v0.3 and user engagement increased 340%. We removed them again because it felt dishonest.</p>
      </div>
      <div class="what-is-right" x-data="mallStats()">
        <div class="stat-row">
          <span class="stat-label">Malls Generated</span>
          <span class="stat-value" x-text="malls.toLocaleString()"></span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Avg. Corridors / Mall</span>
          <span class="stat-value" x-text="corridors.toFixed(1)"></span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Muzak Tracks Synthesized</span>
          <span class="stat-value" x-text="tracks.toLocaleString()"></span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Users Currently Lost</span>
          <span class="stat-value" x-text="usersLost.toLocaleString()"></span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Exits Found</span>
          <span class="stat-value">0</span>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ MALLSOFT OF THE MONTH ═══ -->
<section class="mallsoft">
  <div class="container">
    <div class="fade-section" x-data="mallsoftPlayer()">
      <h2>Mallsoft of the Month</h2>
      <p class="mallsoft-sub">CURATED VOL. 47 — FEBRUARY 2026</p>
      <div class="player-card">
        <div class="player-controls">
          <button class="play-btn" @click="togglePlay()" :aria-label="playing ? 'Pause' : 'Play'">
            <svg viewBox="0 0 24 24" x-show="!playing"><polygon points="6,3 20,12 6,21"/></svg>
            <svg viewBox="0 0 24 24" x-show="playing"><rect x="5" y="3" width="4" height="18" fill="currentColor"/><rect x="15" y="3" width="4" height="18" fill="currentColor"/></svg>
          </button>
          <div class="waveform" :class="{ playing: playing }" id="waveform"></div>
        </div>
        <ul class="track-list">
          <template x-for="(track, i) in tracks" :key="i">
            <li class="track-item" :class="{ active: currentTrack === i }" @click="selectTrack(i)">
              <span class="track-icon">▶</span>
              <span class="track-name" x-text="track.name"></span>
              <span class="track-time" x-text="currentTrack === i && playing ? formatTime(elapsed) : track.duration"></span>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ LOST & FOUND ═══ -->
<section class="lost-found">
  <div class="container">
    <div class="fade-section">
      <h2>Lost &amp; Found</h2>
      <p class="lost-found-sub">ITEMS RECOVERED FROM GENERATED MALLS — PROVENANCE UNVERIFIED</p>
      <div class="lf-grid">
        <div class="lf-card">
          <div class="lf-glitch"></div>
          <div class="lf-body">
            <p class="lf-caption">Found near Sears anchor store, Floor -2. The mannequin was facing the wall. It wasn't doing that yesterday.</p>
            <p class="lf-user">— user_7741 (Corridor 88)</p>
          </div>
        </div>
        <div class="lf-card">
          <div class="lf-glitch" style="--accent-shift: 60deg;"></div>
          <div class="lf-body">
            <p class="lf-caption">A Sbarro napkin with coordinates written in ballpoint. The coordinates point to another Sbarro. I checked.</p>
            <p class="lf-user">— mall_rat_92 (Food Court Theta)</p>
          </div>
        </div>
        <div class="lf-card">
          <div class="lf-glitch" style="--accent-shift: 120deg;"></div>
          <div class="lf-body">
            <p class="lf-caption">Children's shoe, left foot only. Velcro. The Velcro still works. That's the part that bothers me.</p>
            <p class="lf-user">— liminal_kate (Escalator Bank 3)</p>
          </div>
        </div>
        <div class="lf-card">
          <div class="lf-glitch" style="--accent-shift: 180deg;"></div>
          <div class="lf-body">
            <p class="lf-caption">A gift card to a store called "Atmospheres." Balance: $47.00. The store is always one floor above wherever you are.</p>
            <p class="lf-user">— fountain_diver (Mall #1,204,881)</p>
          </div>
        </div>
        <div class="lf-card">
          <div class="lf-glitch" style="--accent-shift: 240deg;"></div>
          <div class="lf-body">
            <p class="lf-caption">Polaroid of a family standing in front of a store that doesn't exist. They look happy. The store has no name.</p>
            <p class="lf-user">— anchor_ghost (Wing C)</p>
          </div>
        </div>
        <div class="lf-card">
          <div class="lf-glitch" style="--accent-shift: 300deg;"></div>
          <div class="lf-body">
            <p class="lf-caption">A mall directory that lists every store as "Coming Soon." Dated 1994. Every year is 1994 in here.</p>
            <p class="lf-user">— neon_archaeologist (Kiosk Island)</p>
          </div>
        </div>
      </div>
      <a href="#" class="submit-link" onclick="return false;">SUBMIT YOUR FINDING →</a>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ MALL GHOSTS ═══ -->
<section class="mall-ghosts">
  <div class="container">
    <div class="fade-section" x-data="ghostData()">
      <h2>Mall Ghosts</h2>
      <p class="ghosts-intro">Certain elements recur across generated malls with a frequency that exceeds statistical probability. The system doesn't place them. They appear. We've stopped investigating and started cataloging.</p>
      <template x-for="(ghost, i) in ghosts" :key="i">
        <div class="ghost-card">
          <span class="ghost-name" x-text="ghost.name"></span>
          <span class="ghost-theory" x-text="ghost.theory"></span>
          <span class="ghost-sightings"
            :class="{ flash: ghost.flashing }"
            @click="report(i)"
            x-text="ghost.sightings.toLocaleString() + ' sightings'"
            :title="'Click to report a sighting'"></span>
        </div>
      </template>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ FLIPPER ═══ -->
<section class="flipper-section">
  <div class="container">
    <div class="fade-section">
      <h2 style="font-size: clamp(1.4rem, 3vw, 2rem); text-transform: uppercase; color: var(--teal); margin-bottom: 40px; letter-spacing: 0.05em;">Flipper.obj</h2>
      <div class="dolphin-container">
        <div class="dolphin-wire"></div>
      </div>
      <p class="flipper-text">Download <strong>Flipper.obj</strong> — a low-poly dolphin for your personal mall simulations. Place him by the fountain. He's been waiting. 847 vertices. No textures. He doesn't need them. He knows what he is.</p>
      <button class="download-btn" onclick="return false;">DOWNLOAD FLIPPER.OBJ — 12KB</button>
    </div>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ FOOTER ═══ -->
<footer class="site-footer">
  <div class="container">
    <div class="fade-section" x-data="footerCounter()">
      <p class="footer-label">Total Hours Spent Lost</p>
      <p class="footer-counter" x-text="formatHours(hours)"></p>
      <p class="footer-credits">Founded 2017 by Astrid Ødegård &amp; Kenji Tanaka in Shimokitazawa. Acquired 2021 by Pachinko Futures Corp. You can't go back, but you can wander.</p>
      <p class="footer-micro">LiminalSpaceFinder.net has no affiliation with this project and we have nothing further to say on the matter.</p>
    </div>
  </div>
</footer>

<!-- ═══ EASTER EGG ═══ -->
<div class="easter-egg" id="easterEgg">
  <div class="easter-egg-text">DEVELOPER HIGH SCORE: 847 HOURS, 22 MINUTES.<br>THE FOOD COURT STILL SMELLS LIKE ORANGE JULIUS.</div>
</div>

<script src="/assets/js/gsap.min.js"></script>
<script src="/assets/js/alpine.min.js" defer></script>
<script>
// ═══ ALPINE DATA ═══

document.addEventListener('alpine:init', function() {

  Alpine.data('mallStats', function() {
    return {
      malls: 2847331,
      corridors: 47.2,
      tracks: 891204,
      usersLost: 1433,
      init() {
        var self = this;
        function tick() {
          var delay = 2000 + Math.random() * 5000;
          setTimeout(function() {
            self.malls += Math.floor(Math.random() * 3) + 1;
            self.tracks += Math.floor(Math.random() * 2) + 1;
            self.corridors = Math.round((self.corridors + (Math.random() * 0.2 - 0.1)) * 10) / 10;
            self.usersLost += Math.floor(Math.random() * 3) - 1;
            if (self.usersLost < 1200) self.usersLost = 1200;
            tick();
          }, delay);
        }
        tick();
      }
    };
  });

  Alpine.data('mallsoftPlayer', function() {
    return {
      playing: false,
      currentTrack: 0,
      elapsed: 0,
      _interval: null,
      tracks: [
        { name: 'Atrium Echo (Level 3 Remix)', duration: '4:17' },
        { name: 'Fountain Court Ambient #0817', duration: '6:42' },
        { name: 'Escalator Descent (Slowed + Marble)', duration: '3:55' },
        { name: 'Sbarro Parking Structure at Dusk', duration: '5:31' },
        { name: 'Anchor Store Requiem (Nobody Mix)', duration: '7:08' }
      ],
      togglePlay: function() {
        this.playing = !this.playing;
        if (this.playing) {
          this.startTimer();
        } else {
          this.stopTimer();
        }
      },
      selectTrack: function(i) {
        this.currentTrack = i;
        this.elapsed = 0;
        if (!this.playing) {
          this.playing = true;
        }
        this.stopTimer();
        this.startTimer();
      },
      startTimer: function() {
        var self = this;
        this._interval = setInterval(function() {
          self.elapsed++;
        }, 1000);
      },
      stopTimer: function() {
        clearInterval(this._interval);
      },
      formatTime: function(s) {
        var m = Math.floor(s / 60);
        var sec = s % 60;
        return m + ':' + (sec < 10 ? '0' : '') + sec;
      }
    };
  });

  Alpine.data('ghostData', function() {
    return {
      ghosts: [
        { name: 'The Fern', sightings: 12847, theory: '"It\'s the same fern. I marked the pot with a Sharpie in Mall #40,002. Found it again in Mall #1,200,771. Same mark."', flashing: false },
        { name: 'Escalator 7', sightings: 8331, theory: '"Always broken. Always the seventh one. The steps move but they don\'t go anywhere. Like most of us."', flashing: false },
        { name: 'Blue Coat Woman', sightings: 23119, theory: '"She\'s always walking away. I\'ve been following her for six months. The distance between us never changes."', flashing: false }
      ],
      report: function(i) {
        this.ghosts[i].sightings++;
        this.ghosts[i].flashing = true;
        var self = this;
        setTimeout(function() {
          self.ghosts[i].flashing = false;
        }, 200);
      }
    };
  });

  Alpine.data('footerCounter', function() {
    return {
      hours: 4821947,
      init() {
        var self = this;
        function tick() {
          var delay = 1000 + Math.random() * 4000;
          setTimeout(function() {
            self.hours += Math.floor(Math.random() * 3) + 1;
            tick();
          }, delay);
        }
        tick();
      },
      formatHours: function(h) {
        return h.toLocaleString();
      }
    };
  });

});

// ═══ WAVEFORM BARS ═══
(function() {
  var waveform = document.getElementById('waveform');
  if (waveform) {
    for (var i = 0; i < 50; i++) {
      var bar = document.createElement('div');
      bar.className = 'wave-bar';
      bar.style.setProperty('--min-h', (4 + Math.random() * 8) + 'px');
      bar.style.setProperty('--max-h', (16 + Math.random() * 30) + 'px');
      bar.style.animationDelay = (Math.random() * 0.6) + 's';
      bar.style.animationDuration = (0.3 + Math.random() * 0.5) + 's';
      waveform.appendChild(bar);
    }
  }
})();

// ═══ SCROLL ANIMATIONS ═══
(function() {
  var sections = document.querySelectorAll('.fade-section');
  var dividers = document.querySelectorAll('.section-divider');

  var sectionObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        var el = entry.target;
        gsap.fromTo(el,
          { opacity: 0, y: 30 },
          { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' }
        );

        var children = el.querySelectorAll('.stat-row, .lf-card, .ghost-card, .track-item');
        children.forEach(function(child, i) {
          gsap.fromTo(child,
            { opacity: 0, y: 20 },
            { opacity: 1, y: 0, duration: 0.6, delay: 0.1 * (i + 1), ease: 'power2.out' }
          );
        });

        sectionObs.unobserve(el);
      }
    });
  }, { threshold: 0.15 });

  sections.forEach(function(s) { sectionObs.observe(s); });

  var divObs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('pulse');
        divObs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.5 });

  dividers.forEach(function(d) { divObs.observe(d); });
})();

// ═══ KONAMI CODE ═══
(function() {
  var sequence = [38,38,40,40,37,39,37,39];
  var pos = 0;
  var egg = document.getElementById('easterEgg');

  document.addEventListener('keydown', function(e) {
    if (e.keyCode === sequence[pos]) {
      pos++;
      if (pos === sequence.length) {
        pos = 0;
        document.body.classList.add('inverted');
        egg.classList.add('show');
        setTimeout(function() {
          document.body.classList.remove('inverted');
          egg.classList.remove('show');
        }, 5000);
      }
    } else {
      pos = 0;
    }
  });
})();
</script>

</body>
</html>
